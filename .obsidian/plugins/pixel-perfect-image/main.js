/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var pe=Object.defineProperty;var tt=Object.getOwnPropertyDescriptor;var nt=Object.getOwnPropertyNames;var it=Object.prototype.hasOwnProperty;var k=(d,t)=>()=>(d&&(t=d(d=0)),t);var ue=(d,t)=>{for(var e in t)pe(d,e,{get:t[e],enumerable:!0})},ot=(d,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of nt(t))!it.call(d,i)&&i!==e&&pe(d,i,{get:()=>t[i],enumerable:!(n=tt(t,i))||n.enumerable});return d};var at=d=>ot(pe({},"__esModule",{value:!0}),d);var Ce,De=k(()=>{Ce={menu:{remoteImage:"Remote image",copyImageUrl:"Copy image URL",copyImage:"Copy image",copyLocalPath:"Copy local path",resizeTo:"Resize to {size}",removeCustomSize:"Remove custom size",showInFinder:"Show in Finder",showInExplorer:"Show in Explorer",renameImage:"Rename image",deleteImageAndLink:"Delete image and link",openInNewTab:"Open in new tab",openToTheRight:"Open to the right",openInNewWindow:"Open in new window",openInDefaultApp:"Open in default app",openInEditor:"Open in {editor}"},notices:{imageUrlCopied:"Image URL copied to clipboard",imageCopied:"Image copied to clipboard",filePathCopied:"File path copied to clipboard",customSizeRemoved:"Removed custom size from image",imageRenamed:"Image renamed successfully",imageAndLinksDeleted:"Image and links deleted successfully",imageDeleted:"Image deleted successfully",couldNotReadDimensions:"Could not read image dimensions",couldNotDetermineSvgDimensions:"Could not determine SVG dimensions (missing width/height/viewBox)",couldNotDetermineImageDimensions:"Could not determine image dimensions",cannotCopyPath:"Cannot copy path - not using file system adapter",couldNotLocateImage:"Could not locate image file",setEditorPath:"Please set your {editor} path in Pixel Perfect Image settings.",cannotOpenFile:"Cannot open file: This vault uses a non-standard storage system",couldNotOpenInEditor:"Could not open file in {editor}.",failedToRename:"Failed to rename image",failedToDelete:"Failed to delete image and links",clickInEditorFirst:"Please click in the editor first, then try copying again",failedToResize:"Failed to resize image",failedToPerformAction:"Failed to {action}",imageTooLargeToCopy:"Image is too large to copy to clipboard",fetchingLocalNetworkImage:"Fetching image from a local network address",failedToFetchExternalImage:"Failed to fetch external image (HTTP {status})",externalImageNotImage:"The URL did not return an image",externalImageFetchTimedOut:"Timed out fetching external image",failedToCopyUrl:"Failed to copy image URL",failedToCopyImage:"Failed to copy image to clipboard",failedToCopyPath:"Failed to copy file path",failedToResizeTo:"Failed to resize image to {size}",failedToRemoveSize:"Failed to remove custom size from image",failedToOpenExplorer:"Failed to open system explorer",failedToRenameImage:"Failed to rename image",failedToDeleteImage:"Failed to delete image",failedToOpenInNewTab:"Failed to open image in new tab",failedToOpenToTheRight:"Failed to open image to the right",failedToOpenInNewWindow:"Failed to open image in new window",failedToOpenInDefaultApp:"Failed to open in default app",failedToOpenInEditor:"Failed to open image in {editor}"},settings:{headings:{menuOptions:"Toggle individual menu options",mousewheelZoom:"Mousewheel zoom",externalEditor:"External editor",advanced:"Advanced"},items:{whatsNew:{name:"What's new in Pixel Perfect Image {version}",desc:"See the latest changes and improvements.",buttonText:"View recent updates"},fileInfo:{name:"File information",desc:"Show filename and dimensions at top of menu"},showInExplorer:{name:"Show in Finder/Explorer",desc:"Show option to reveal image in system file explorer"},renameImage:{name:"Rename image",desc:"Show option to rename image file"},deleteImage:{name:"Delete image and link",desc:"Show option to delete both image file and link"},openInNewTab:{name:"Open in new tab",desc:"Show option to open image in new tab"},openToTheRight:{name:"Open to the right",desc:"Show option to open image in a right split"},openInNewWindow:{name:"Open in new window",desc:"Show option to open image in a new app window"},openInDefaultApp:{name:"Open in default app",desc:"Show option to open image in default app"},resizeOptions:{name:"Resize options",desc:"Set resize options (comma-separated). Use % for percentages (e.g., 25%, 50%) or px for pixels (e.g., 600px, 800px)",placeholder:"e.g., 25%, 50%, 100%, 600px"},cmdClickBehavior:{name:"{cmd} + click behavior",desc:"Choose what happens when you {cmd} + click an image",options:{doNothing:"Do nothing",openInNewTab:"Open in new tab",openInDefaultApp:"Open in default app",openInEditor:"Open in {editor}"}},enableWheelZoom:{name:"Enable mousewheel zoom",desc:"Hold modifier key and scroll to resize images"},modifierKey:{name:"Modifier key",desc:"Key to hold while scrolling to zoom images",options:{alt:"Alt",option:"Option",ctrl:"Ctrl",shift:"Shift"}},zoomStepSize:{name:"Zoom step size",desc:"Percentage to zoom per scroll step",resetToDefault:"Reset to default"},invertScroll:{name:"Invert scroll direction",desc:"Invert the zoom direction when scrolling"},externalEditorName:{name:"External editor name",desc:"Name of your external editor (e.g., Photoshop)",placeholder:"Photoshop"},externalEditorPathMac:{name:"External editor path (macOS)",desc:"Full path to your external editor application on macOS",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"External editor path (Windows)",desc:"Full path to your external editor application on Windows",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"External editor path (Linux)",desc:"Full path to your external editor application on Linux",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"Confirm before delete",desc:"Show confirmation dialog before deleting files"},debugMode:{name:"Debug mode",desc:"Enable debug logging to console"}}},modals:{rename:{title:"Rename image",renameButton:"Rename",cancelButton:"Cancel"},delete:{title:"Delete image",confirmMessage:'Are you sure you want to delete "{filename}"?',warningMessage:"This will delete both the image file and all links to it in the current document.",deleteButton:"Delete",cancelButton:"Cancel"}},whatsNew:{title:"What's new in Pixel Perfect Image",categories:{new:"New",improved:"Improved",changed:"Changed",fixed:"Fixed"},supportMessage:"If Pixel Perfect Image is useful, please consider supporting its continued development.",supportButton:"Buy me a coffee",thanksButton:"Thanks!"},actions:{performAction:"perform action",openInNewTab:"open image in new tab",openToTheRight:"open image to the right",openInNewWindow:"open image in new window",openInDefaultApp:"open image in default app",openInEditor:"open image in {editor}"}}});var Ne,Le=k(()=>{Ne={menu:{remoteImage:"Remote-Bild",copyImageUrl:"Bild-URL kopieren",copyImage:"Bild kopieren",copyLocalPath:"Lokalen Pfad kopieren",resizeTo:"Gr\xF6\xDFe \xE4ndern auf {size}",removeCustomSize:"Benutzerdefinierte Gr\xF6\xDFe entfernen",showInFinder:"Show in Finder",showInExplorer:"Im Explorer anzeigen",renameImage:"Bild umbenennen",deleteImageAndLink:"Bild und Link l\xF6schen",openInNewTab:"In neuem Tab \xF6ffnen",openToTheRight:"Nach rechts \xF6ffnen",openInNewWindow:"In neuem Fenster \xF6ffnen",openInDefaultApp:"In Standard-App \xF6ffnen",openInEditor:"In {editor} \xF6ffnen"},notices:{imageUrlCopied:"Bild-URL in Zwischenablage kopiert",imageCopied:"Bild in Zwischenablage kopiert",filePathCopied:"Dateipfad in Zwischenablage kopiert",customSizeRemoved:"Benutzerdefinierte Gr\xF6\xDFe vom Bild entfernt",imageRenamed:"Bild erfolgreich umbenannt",imageAndLinksDeleted:"Bild und Links erfolgreich gel\xF6scht",imageDeleted:"Bild erfolgreich gel\xF6scht",couldNotReadDimensions:"Bildabmessungen konnten nicht gelesen werden",couldNotDetermineSvgDimensions:"SVG-Abmessungen konnten nicht bestimmt werden (width/height/viewBox fehlen)",couldNotDetermineImageDimensions:"Bildabmessungen konnten nicht bestimmt werden",cannotCopyPath:"Pfad kann nicht kopiert werden - kein Dateisystem-Adapter",couldNotLocateImage:"Bilddatei konnte nicht gefunden werden",setEditorPath:"Bitte legen Sie den {editor}-Pfad in den Pixel Perfect Image Einstellungen fest.",cannotOpenFile:"Datei kann nicht ge\xF6ffnet werden: Dieser Vault verwendet ein nicht-standardm\xE4\xDFiges Speichersystem",couldNotOpenInEditor:"Datei konnte nicht in {editor} ge\xF6ffnet werden.",failedToRename:"Umbenennen des Bildes fehlgeschlagen",failedToDelete:"L\xF6schen von Bild und Links fehlgeschlagen",clickInEditorFirst:"Bitte klicken Sie zuerst in den Editor und versuchen Sie dann erneut zu kopieren",failedToResize:"Gr\xF6\xDFen\xE4nderung des Bildes fehlgeschlagen",failedToPerformAction:"{action} fehlgeschlagen",imageTooLargeToCopy:"Bild ist zu gro\xDF, um in die Zwischenablage kopiert zu werden",fetchingLocalNetworkImage:"Bild wird von einer lokalen Netzwerkadresse abgerufen",failedToFetchExternalImage:"Externes Bild konnte nicht abgerufen werden (HTTP {status})",externalImageNotImage:"Die URL hat kein Bild zur\xFCckgegeben",externalImageFetchTimedOut:"Zeit\xFCberschreitung beim Abrufen des externen Bildes",failedToCopyUrl:"Kopieren der Bild-URL fehlgeschlagen",failedToCopyImage:"Kopieren des Bildes in Zwischenablage fehlgeschlagen",failedToCopyPath:"Kopieren des Dateipfads fehlgeschlagen",failedToResizeTo:"Gr\xF6\xDFen\xE4nderung auf {size} fehlgeschlagen",failedToRemoveSize:"Entfernen der benutzerdefinierten Gr\xF6\xDFe fehlgeschlagen",failedToOpenExplorer:"\xD6ffnen des System-Explorers fehlgeschlagen",failedToRenameImage:"Umbenennen des Bildes fehlgeschlagen",failedToDeleteImage:"L\xF6schen des Bildes fehlgeschlagen",failedToOpenInNewTab:"\xD6ffnen des Bildes in neuem Tab fehlgeschlagen",failedToOpenToTheRight:"\xD6ffnen des Bildes nach rechts fehlgeschlagen",failedToOpenInNewWindow:"\xD6ffnen des Bildes in neuem Fenster fehlgeschlagen",failedToOpenInDefaultApp:"\xD6ffnen in Standard-App fehlgeschlagen",failedToOpenInEditor:"\xD6ffnen des Bildes in {editor} fehlgeschlagen"},settings:{headings:{menuOptions:"Einzelne Men\xFCoptionen umschalten",mousewheelZoom:"Mausrad-Zoom",externalEditor:"Externer Editor",advanced:"Erweitert"},items:{whatsNew:{name:"Was ist neu in Pixel Perfect Image {version}",desc:"Sieh dir die neuesten \xC4nderungen und Verbesserungen an.",buttonText:"Neueste Updates anzeigen"},fileInfo:{name:"Dateiinformationen",desc:"Dateiname und Abmessungen oben im Men\xFC anzeigen"},showInExplorer:{name:"Show in Finder/Explorer",desc:"Option zum Anzeigen des Bildes im System-Dateiexplorer anzeigen"},renameImage:{name:"Bild umbenennen",desc:"Option zum Umbenennen der Bilddatei anzeigen"},deleteImage:{name:"Bild und Link l\xF6schen",desc:"Option zum L\xF6schen von Bilddatei und Link anzeigen"},openInNewTab:{name:"In neuem Tab \xF6ffnen",desc:"Option zum \xD6ffnen des Bildes in neuem Tab anzeigen"},openToTheRight:{name:"Nach rechts \xF6ffnen",desc:"Option zum \xD6ffnen des Bildes in einem rechten Split anzeigen"},openInNewWindow:{name:"In neuem Fenster \xF6ffnen",desc:"Option zum \xD6ffnen des Bildes in einem neuen Anwendungsfenster anzeigen"},openInDefaultApp:{name:"In Standard-App \xF6ffnen",desc:"Option zum \xD6ffnen des Bildes in Standard-App anzeigen"},resizeOptions:{name:"Gr\xF6\xDFenoptionen",desc:"Gr\xF6\xDFenoptionen festlegen (kommagetrennt). Verwenden Sie % f\xFCr Prozent (z.B. 25%, 50%) oder px f\xFCr Pixel (z.B. 600px, 800px)",placeholder:"z.B. 25%, 50%, 100%, 600px"},cmdClickBehavior:{name:"{cmd} + Klick Verhalten",desc:"W\xE4hlen Sie, was passiert, wenn Sie {cmd} + Klick auf ein Bild ausf\xFChren",options:{doNothing:"Nichts tun",openInNewTab:"In neuem Tab \xF6ffnen",openInDefaultApp:"In Standard-App \xF6ffnen",openInEditor:"In {editor} \xF6ffnen"}},enableWheelZoom:{name:"Mausrad-Zoom aktivieren",desc:"Modifikationstaste halten und scrollen zum \xC4ndern der Bildgr\xF6\xDFe"},modifierKey:{name:"Modifikationstaste",desc:"Taste, die beim Scrollen zum Zoomen gehalten werden muss",options:{alt:"Alt",option:"Option",ctrl:"Strg",shift:"Umschalt"}},zoomStepSize:{name:"Zoom-Schrittgr\xF6\xDFe",desc:"Prozentsatz zum Zoomen pro Scroll-Schritt",resetToDefault:"Auf Standard zur\xFCcksetzen"},invertScroll:{name:"Scroll-Richtung umkehren",desc:"Zoom-Richtung beim Scrollen umkehren"},externalEditorName:{name:"Name des externen Editors",desc:"Name Ihres externen Editors (z.B. Photoshop)",placeholder:"Photoshop"},externalEditorPathMac:{name:"Pfad zum externen Editor (macOS)",desc:"Vollst\xE4ndiger Pfad zu Ihrer externen Editor-Anwendung auf macOS",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"Pfad zum externen Editor (Windows)",desc:"Vollst\xE4ndiger Pfad zu Ihrer externen Editor-Anwendung auf Windows",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"Pfad zum externen Editor (Linux)",desc:"Vollst\xE4ndiger Pfad zu Ihrer externen Editor-Anwendung unter Linux",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"Vor dem L\xF6schen best\xE4tigen",desc:"Best\xE4tigungsdialog vor dem L\xF6schen von Dateien anzeigen"},debugMode:{name:"Debug-Modus",desc:"Debug-Protokollierung in Konsole aktivieren"}}},modals:{rename:{title:"Bild umbenennen",renameButton:"Umbenennen",cancelButton:"Abbrechen"},delete:{title:"Bild l\xF6schen",confirmMessage:'M\xF6chten Sie "{filename}" wirklich l\xF6schen?',warningMessage:"Dies l\xF6scht sowohl die Bilddatei als auch alle Links dazu im aktuellen Dokument.",deleteButton:"L\xF6schen",cancelButton:"Abbrechen"}},whatsNew:{title:"Was ist neu in Pixel Perfect Image",categories:{new:"Neu",improved:"Verbessert",changed:"Ge\xE4ndert",fixed:"Behoben"},supportMessage:"Wenn Pixel Perfect Image n\xFCtzlich ist, erw\xE4ge bitte eine Unterst\xFCtzung der weiteren Entwicklung.",supportButton:"Kauf mir einen Kaffee",thanksButton:"Danke!"},actions:{performAction:"Aktion ausf\xFChren",openInNewTab:"Bild in neuem Tab \xF6ffnen",openToTheRight:"Bild nach rechts \xF6ffnen",openInNewWindow:"Bild in neuem Fenster \xF6ffnen",openInDefaultApp:"Bild in Standard-App \xF6ffnen",openInEditor:"Bild in {editor} \xF6ffnen"}}});var ke,Me=k(()=>{ke={menu:{remoteImage:"Imagen remota",copyImageUrl:"Copiar URL de imagen",copyImage:"Copiar imagen",copyLocalPath:"Copiar ruta local",resizeTo:"Redimensionar a {size}",removeCustomSize:"Eliminar tama\xF1o personalizado",showInFinder:"Show in Finder",showInExplorer:"Mostrar en Explorador",renameImage:"Renombrar imagen",deleteImageAndLink:"Eliminar imagen y enlace",openInNewTab:"Abrir en nueva pesta\xF1a",openToTheRight:"Abrir a la derecha",openInNewWindow:"Abrir en nueva ventana",openInDefaultApp:"Abrir con aplicaci\xF3n predeterminada",openInEditor:"Abrir en {editor}"},notices:{imageUrlCopied:"URL de imagen copiada al portapapeles",imageCopied:"Imagen copiada al portapapeles",filePathCopied:"Ruta del archivo copiada al portapapeles",customSizeRemoved:"Tama\xF1o personalizado eliminado de la imagen",imageRenamed:"Imagen renombrada exitosamente",imageAndLinksDeleted:"Imagen y enlaces eliminados exitosamente",imageDeleted:"Imagen eliminada exitosamente",couldNotReadDimensions:"No se pudieron leer las dimensiones de la imagen",couldNotDetermineSvgDimensions:"No se pudieron determinar las dimensiones del SVG (faltan width/height/viewBox)",couldNotDetermineImageDimensions:"No se pudieron determinar las dimensiones de la imagen",cannotCopyPath:"No se puede copiar la ruta - no usa adaptador del sistema de archivos",couldNotLocateImage:"No se pudo localizar el archivo de imagen",setEditorPath:"Por favor, configura la ruta de {editor} en la configuraci\xF3n de Pixel Perfect Image.",cannotOpenFile:"No se puede abrir el archivo: Esta b\xF3veda usa un sistema de almacenamiento no est\xE1ndar",couldNotOpenInEditor:"No se pudo abrir el archivo en {editor}.",failedToRename:"Error al renombrar la imagen",failedToDelete:"Error al eliminar la imagen y enlaces",clickInEditorFirst:"Por favor, haz clic en el editor primero, luego intenta copiar nuevamente",failedToResize:"Error al redimensionar la imagen",failedToPerformAction:"Error al {action}",imageTooLargeToCopy:"La imagen es demasiado grande para copiarla al portapapeles",fetchingLocalNetworkImage:"Obteniendo imagen desde una direcci\xF3n de red local",failedToFetchExternalImage:"Error al obtener la imagen externa (HTTP {status})",externalImageNotImage:"La URL no devolvi\xF3 una imagen",externalImageFetchTimedOut:"Tiempo de espera agotado al obtener la imagen externa",failedToCopyUrl:"Error al copiar URL de imagen",failedToCopyImage:"Error al copiar imagen al portapapeles",failedToCopyPath:"Error al copiar la ruta del archivo",failedToResizeTo:"Error al redimensionar imagen a {size}",failedToRemoveSize:"Error al eliminar tama\xF1o personalizado de la imagen",failedToOpenExplorer:"Error al abrir el explorador del sistema",failedToRenameImage:"Error al renombrar la imagen",failedToDeleteImage:"Error al eliminar la imagen",failedToOpenInNewTab:"Error al abrir imagen en nueva pesta\xF1a",failedToOpenToTheRight:"Error al abrir imagen a la derecha",failedToOpenInNewWindow:"Error al abrir imagen en nueva ventana",failedToOpenInDefaultApp:"Error al abrir con aplicaci\xF3n predeterminada",failedToOpenInEditor:"Error al abrir imagen en {editor}"},settings:{headings:{menuOptions:"Alternar opciones individuales del men\xFA",mousewheelZoom:"Zoom con rueda del rat\xF3n",externalEditor:"Editor externo",advanced:"Avanzado"},items:{whatsNew:{name:"Novedades de Pixel Perfect Image {version}",desc:"Consulta los \xFAltimos cambios y mejoras.",buttonText:"Ver actualizaciones recientes"},fileInfo:{name:"Informaci\xF3n del archivo",desc:"Mostrar nombre del archivo y dimensiones en la parte superior del men\xFA"},showInExplorer:{name:"Show in Finder/Explorador",desc:"Mostrar opci\xF3n para revelar imagen en el explorador de archivos del sistema"},renameImage:{name:"Renombrar imagen",desc:"Mostrar opci\xF3n para renombrar archivo de imagen"},deleteImage:{name:"Eliminar imagen y enlace",desc:"Mostrar opci\xF3n para eliminar tanto el archivo de imagen como el enlace"},openInNewTab:{name:"Abrir en nueva pesta\xF1a",desc:"Mostrar opci\xF3n para abrir imagen en nueva pesta\xF1a"},openToTheRight:{name:"Abrir a la derecha",desc:"Mostrar opci\xF3n para abrir imagen en una divisi\xF3n a la derecha"},openInNewWindow:{name:"Abrir en nueva ventana",desc:"Mostrar opci\xF3n para abrir imagen en una nueva ventana de la aplicaci\xF3n"},openInDefaultApp:{name:"Abrir con aplicaci\xF3n predeterminada",desc:"Mostrar opci\xF3n para abrir imagen con aplicaci\xF3n predeterminada"},resizeOptions:{name:"Opciones de redimensionado",desc:"Configurar opciones de redimensionado (separadas por comas). Usa % para porcentajes (ej., 25%, 50%) o px para p\xEDxeles (ej., 600px, 800px)",placeholder:"ej., 25%, 50%, 100%, 600px"},cmdClickBehavior:{name:"Comportamiento de {cmd} + clic",desc:"Elige qu\xE9 sucede cuando haces {cmd} + clic en una imagen",options:{doNothing:"No hacer nada",openInNewTab:"Abrir en nueva pesta\xF1a",openInDefaultApp:"Abrir con aplicaci\xF3n predeterminada",openInEditor:"Abrir en {editor}"}},enableWheelZoom:{name:"Habilitar zoom con rueda del rat\xF3n",desc:"Mant\xE9n presionada la tecla modificadora y despl\xE1zate para redimensionar im\xE1genes"},modifierKey:{name:"Tecla modificadora",desc:"Tecla a mantener mientras te desplazas para hacer zoom en im\xE1genes",options:{alt:"Alt",option:"Option",ctrl:"Ctrl",shift:"Shift"}},zoomStepSize:{name:"Tama\xF1o del paso de zoom",desc:"Porcentaje a hacer zoom por paso de desplazamiento",resetToDefault:"Restablecer a predeterminado"},invertScroll:{name:"Invertir direcci\xF3n de desplazamiento",desc:"Invertir la direcci\xF3n del zoom al desplazarse"},externalEditorName:{name:"Nombre del editor externo",desc:"Nombre de tu editor externo (ej., Photoshop)",placeholder:"Photoshop"},externalEditorPathMac:{name:"Ruta del editor externo (macOS)",desc:"Ruta completa a tu aplicaci\xF3n de editor externo en macOS",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"Ruta del editor externo (Windows)",desc:"Ruta completa a tu aplicaci\xF3n de editor externo en Windows",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"Ruta del editor externo (Linux)",desc:"Ruta completa a tu aplicaci\xF3n de editor externo en Linux",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"Confirmar antes de eliminar",desc:"Mostrar di\xE1logo de confirmaci\xF3n antes de eliminar archivos"},debugMode:{name:"Modo de depuraci\xF3n",desc:"Habilitar registro de depuraci\xF3n en la consola"}}},modals:{rename:{title:"Renombrar imagen",renameButton:"Renombrar",cancelButton:"Cancelar"},delete:{title:"Eliminar imagen",confirmMessage:'\xBFEst\xE1s seguro de que quieres eliminar "{filename}"?',warningMessage:"Esto eliminar\xE1 tanto el archivo de imagen como todos los enlaces a \xE9l en el documento actual.",deleteButton:"Eliminar",cancelButton:"Cancelar"}},whatsNew:{title:"Novedades de Pixel Perfect Image",categories:{new:"Nuevo",improved:"Mejorado",changed:"Cambiado",fixed:"Corregido"},supportMessage:"Si Pixel Perfect Image te resulta \xFAtil, considera apoyar su desarrollo.",supportButton:"Inv\xEDtame un caf\xE9",thanksButton:"\xA1Gracias!"},actions:{performAction:"realizar acci\xF3n",openInNewTab:"abrir imagen en nueva pesta\xF1a",openToTheRight:"abrir imagen a la derecha",openInNewWindow:"abrir imagen en nueva ventana",openInDefaultApp:"abrir imagen con aplicaci\xF3n predeterminada",openInEditor:"abrir imagen en {editor}"}}});var Ae,Re=k(()=>{Ae={menu:{remoteImage:"Image distante",copyImageUrl:"Copier l'URL de l'image",copyImage:"Copier l'image",copyLocalPath:"Copier le chemin local",resizeTo:"Redimensionner \xE0 {size}",removeCustomSize:"Supprimer la taille personnalis\xE9e",showInFinder:"Show in Finder",showInExplorer:"Afficher dans l'Explorateur",renameImage:"Renommer l'image",deleteImageAndLink:"Supprimer l'image et le lien",openInNewTab:"Ouvrir dans un nouvel onglet",openToTheRight:"Ouvrir \xE0 droite",openInNewWindow:"Ouvrir dans une nouvelle fen\xEAtre",openInDefaultApp:"Ouvrir avec l'application par d\xE9faut",openInEditor:"Ouvrir dans {editor}"},notices:{imageUrlCopied:"URL de l'image copi\xE9e dans le presse-papiers",imageCopied:"Image copi\xE9e dans le presse-papiers",filePathCopied:"Chemin du fichier copi\xE9 dans le presse-papiers",customSizeRemoved:"Taille personnalis\xE9e supprim\xE9e de l'image",imageRenamed:"Image renomm\xE9e avec succ\xE8s",imageAndLinksDeleted:"Image et liens supprim\xE9s avec succ\xE8s",imageDeleted:"Image supprim\xE9e avec succ\xE8s",couldNotReadDimensions:"Impossible de lire les dimensions de l'image",couldNotDetermineSvgDimensions:"Impossible de d\xE9terminer les dimensions du SVG (width/height/viewBox manquants)",couldNotDetermineImageDimensions:"Impossible de d\xE9terminer les dimensions de l'image",cannotCopyPath:"Impossible de copier le chemin - n'utilise pas l'adaptateur du syst\xE8me de fichiers",couldNotLocateImage:"Impossible de localiser le fichier image",setEditorPath:"Veuillez d\xE9finir le chemin de {editor} dans les param\xE8tres de Pixel Perfect Image.",cannotOpenFile:"Impossible d'ouvrir le fichier : Ce coffre utilise un syst\xE8me de stockage non standard",couldNotOpenInEditor:"Impossible d'ouvrir le fichier dans {editor}.",failedToRename:"\xC9chec du renommage de l'image",failedToDelete:"\xC9chec de la suppression de l'image et des liens",clickInEditorFirst:"Veuillez d'abord cliquer dans l'\xE9diteur, puis r\xE9essayer de copier",failedToResize:"\xC9chec du redimensionnement de l'image",failedToPerformAction:"\xC9chec de {action}",imageTooLargeToCopy:"L'image est trop grande pour \xEAtre copi\xE9e dans le presse-papiers",fetchingLocalNetworkImage:"R\xE9cup\xE9ration de l'image depuis une adresse de r\xE9seau local",failedToFetchExternalImage:"\xC9chec de la r\xE9cup\xE9ration de l'image externe (HTTP {status})",externalImageNotImage:"L'URL n'a pas renvoy\xE9 une image",externalImageFetchTimedOut:"D\xE9lai d\xE9pass\xE9 lors de la r\xE9cup\xE9ration de l'image externe",failedToCopyUrl:"\xC9chec de la copie de l'URL de l'image",failedToCopyImage:"\xC9chec de la copie de l'image dans le presse-papiers",failedToCopyPath:"\xC9chec de la copie du chemin du fichier",failedToResizeTo:"\xC9chec du redimensionnement de l'image \xE0 {size}",failedToRemoveSize:"\xC9chec de la suppression de la taille personnalis\xE9e de l'image",failedToOpenExplorer:"\xC9chec de l'ouverture de l'explorateur syst\xE8me",failedToRenameImage:"\xC9chec du renommage de l'image",failedToDeleteImage:"\xC9chec de la suppression de l'image",failedToOpenInNewTab:"\xC9chec de l'ouverture de l'image dans un nouvel onglet",failedToOpenToTheRight:"\xC9chec de l'ouverture de l'image \xE0 droite",failedToOpenInNewWindow:"\xC9chec de l'ouverture de l'image dans une nouvelle fen\xEAtre",failedToOpenInDefaultApp:"\xC9chec de l'ouverture avec l'application par d\xE9faut",failedToOpenInEditor:"\xC9chec de l'ouverture de l'image dans {editor}"},settings:{headings:{menuOptions:"Basculer les options individuelles du menu",mousewheelZoom:"Zoom avec la molette",externalEditor:"\xC9diteur externe",advanced:"Avanc\xE9"},items:{whatsNew:{name:"Quoi de neuf dans Pixel Perfect Image {version}",desc:"Consultez les derniers changements et am\xE9liorations.",buttonText:"Voir les mises \xE0 jour r\xE9centes"},fileInfo:{name:"Informations du fichier",desc:"Afficher le nom du fichier et les dimensions en haut du menu"},showInExplorer:{name:"Show in Finder/Explorateur",desc:"Afficher l'option pour r\xE9v\xE9ler l'image dans l'explorateur de fichiers syst\xE8me"},renameImage:{name:"Renommer l'image",desc:"Afficher l'option pour renommer le fichier image"},deleteImage:{name:"Supprimer l'image et le lien",desc:"Afficher l'option pour supprimer \xE0 la fois le fichier image et le lien"},openInNewTab:{name:"Ouvrir dans un nouvel onglet",desc:"Afficher l'option pour ouvrir l'image dans un nouvel onglet"},openToTheRight:{name:"Ouvrir \xE0 droite",desc:"Afficher l'option pour ouvrir l'image dans une division \xE0 droite"},openInNewWindow:{name:"Ouvrir dans une nouvelle fen\xEAtre",desc:"Afficher l'option pour ouvrir l'image dans une nouvelle fen\xEAtre de l'application"},openInDefaultApp:{name:"Ouvrir avec l'application par d\xE9faut",desc:"Afficher l'option pour ouvrir l'image avec l'application par d\xE9faut"},resizeOptions:{name:"Options de redimensionnement",desc:"D\xE9finir les options de redimensionnement (s\xE9par\xE9es par des virgules). Utiliser % pour les pourcentages (ex., 25%, 50%) ou px pour les pixels (ex., 600px, 800px)",placeholder:"ex., 25%, 50%, 100%, 600px"},cmdClickBehavior:{name:"Comportement {cmd} + clic",desc:"Choisir ce qui se passe lorsque vous faites {cmd} + clic sur une image",options:{doNothing:"Ne rien faire",openInNewTab:"Ouvrir dans un nouvel onglet",openInDefaultApp:"Ouvrir avec l'application par d\xE9faut",openInEditor:"Ouvrir dans {editor}"}},enableWheelZoom:{name:"Activer le zoom avec la molette",desc:"Maintenez la touche de modification et faites d\xE9filer pour redimensionner les images"},modifierKey:{name:"Touche de modification",desc:"Touche \xE0 maintenir enfonc\xE9e pendant le d\xE9filement pour zoomer sur les images",options:{alt:"Alt",option:"Option",ctrl:"Ctrl",shift:"Shift"}},zoomStepSize:{name:"Taille du pas de zoom",desc:"Pourcentage de zoom par \xE9tape de d\xE9filement",resetToDefault:"R\xE9initialiser par d\xE9faut"},invertScroll:{name:"Inverser la direction de d\xE9filement",desc:"Inverser la direction du zoom lors du d\xE9filement"},externalEditorName:{name:"Nom de l'\xE9diteur externe",desc:"Nom de votre \xE9diteur externe (ex., Photoshop)",placeholder:"Photoshop"},externalEditorPathMac:{name:"Chemin de l'\xE9diteur externe (macOS)",desc:"Chemin complet vers votre application d'\xE9diteur externe sur macOS",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"Chemin de l'\xE9diteur externe (Windows)",desc:"Chemin complet vers votre application d'\xE9diteur externe sur Windows",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"Chemin de l'\xE9diteur externe (Linux)",desc:"Chemin complet vers votre \xE9diteur externe sous Linux",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"Confirmer avant suppression",desc:"Afficher la bo\xEEte de dialogue de confirmation avant de supprimer les fichiers"},debugMode:{name:"Mode d\xE9bogage",desc:"Activer l'enregistrement de d\xE9bogage dans la console"}}},modals:{rename:{title:"Renommer l'image",renameButton:"Renommer",cancelButton:"Annuler"},delete:{title:"Supprimer l'image",confirmMessage:'\xCAtes-vous s\xFBr de vouloir supprimer "{filename}" ?',warningMessage:"Cela supprimera \xE0 la fois le fichier image et tous les liens vers celui-ci dans le document actuel.",deleteButton:"Supprimer",cancelButton:"Annuler"}},whatsNew:{title:"Quoi de neuf dans Pixel Perfect Image",categories:{new:"Nouveau",improved:"Am\xE9lior\xE9",changed:"Modifi\xE9",fixed:"Corrig\xE9"},supportMessage:"Si Pixel Perfect Image vous est utile, envisagez de soutenir son d\xE9veloppement.",supportButton:"M'offrir un caf\xE9",thanksButton:"Merci !"},actions:{performAction:"effectuer l'action",openInNewTab:"ouvrir l'image dans un nouvel onglet",openToTheRight:"ouvrir l'image \xE0 droite",openInNewWindow:"ouvrir l'image dans une nouvelle fen\xEAtre",openInDefaultApp:"ouvrir l'image avec l'application par d\xE9faut",openInEditor:"ouvrir l'image dans {editor}"}}});var We,Fe=k(()=>{We={menu:{remoteImage:"\u30EA\u30E2\u30FC\u30C8\u753B\u50CF",copyImageUrl:"\u753B\u50CFURL\u3092\u30B3\u30D4\u30FC",copyImage:"\u753B\u50CF\u3092\u30B3\u30D4\u30FC",copyLocalPath:"\u30ED\u30FC\u30AB\u30EB\u30D1\u30B9\u3092\u30B3\u30D4\u30FC",resizeTo:"{size}\u306B\u30EA\u30B5\u30A4\u30BA",removeCustomSize:"\u30AB\u30B9\u30BF\u30E0\u30B5\u30A4\u30BA\u3092\u524A\u9664",showInFinder:"Show in Finder",showInExplorer:"\u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC\u3067\u8868\u793A",renameImage:"\u753B\u50CF\u540D\u3092\u5909\u66F4",deleteImageAndLink:"\u753B\u50CF\u3068\u30EA\u30F3\u30AF\u3092\u524A\u9664",openInNewTab:"\u65B0\u3057\u3044\u30BF\u30D6\u3067\u958B\u304F",openToTheRight:"\u53F3\u306B\u958B\u304F",openInNewWindow:"\u65B0\u3057\u3044\u30A6\u30A3\u30F3\u30C9\u30A6\u3067\u958B\u304F",openInDefaultApp:"\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u958B\u304F",openInEditor:"{editor}\u3067\u958B\u304F"},notices:{imageUrlCopied:"\u753B\u50CFURL\u3092\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",imageCopied:"\u753B\u50CF\u3092\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",filePathCopied:"\u30D5\u30A1\u30A4\u30EB\u30D1\u30B9\u3092\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",customSizeRemoved:"\u753B\u50CF\u304B\u3089\u30AB\u30B9\u30BF\u30E0\u30B5\u30A4\u30BA\u3092\u524A\u9664\u3057\u307E\u3057\u305F",imageRenamed:"\u753B\u50CF\u540D\u3092\u6B63\u5E38\u306B\u5909\u66F4\u3057\u307E\u3057\u305F",imageAndLinksDeleted:"\u753B\u50CF\u3068\u30EA\u30F3\u30AF\u3092\u6B63\u5E38\u306B\u524A\u9664\u3057\u307E\u3057\u305F",imageDeleted:"\u753B\u50CF\u3092\u6B63\u5E38\u306B\u524A\u9664\u3057\u307E\u3057\u305F",couldNotReadDimensions:"\u753B\u50CF\u306E\u5BF8\u6CD5\u3092\u8AAD\u307F\u53D6\u308C\u307E\u305B\u3093\u3067\u3057\u305F",couldNotDetermineSvgDimensions:"SVG\u306E\u5BF8\u6CD5\u3092\u7279\u5B9A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\uFF08width/height/viewBox\u304C\u3042\u308A\u307E\u305B\u3093\uFF09",couldNotDetermineImageDimensions:"\u753B\u50CF\u306E\u5BF8\u6CD5\u3092\u7279\u5B9A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",cannotCopyPath:"\u30D1\u30B9\u3092\u30B3\u30D4\u30FC\u3067\u304D\u307E\u305B\u3093 - \u30D5\u30A1\u30A4\u30EB\u30B7\u30B9\u30C6\u30E0\u30A2\u30C0\u30D7\u30BF\u30FC\u3092\u4F7F\u7528\u3057\u3066\u3044\u307E\u305B\u3093",couldNotLocateImage:"\u753B\u50CF\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F",setEditorPath:"Pixel Perfect Image\u8A2D\u5B9A\u3067{editor}\u306E\u30D1\u30B9\u3092\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002",cannotOpenFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u3051\u307E\u305B\u3093\uFF1A\u3053\u306EVault\u306F\u6A19\u6E96\u4EE5\u5916\u306E\u30B9\u30C8\u30EC\u30FC\u30B8\u30B7\u30B9\u30C6\u30E0\u3092\u4F7F\u7528\u3057\u3066\u3044\u307E\u3059",couldNotOpenInEditor:"{editor}\u3067\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u3051\u307E\u305B\u3093\u3067\u3057\u305F\u3002",failedToRename:"\u753B\u50CF\u540D\u306E\u5909\u66F4\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToDelete:"\u753B\u50CF\u3068\u30EA\u30F3\u30AF\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F",clickInEditorFirst:"\u6700\u521D\u306B\u30A8\u30C7\u30A3\u30BF\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u304B\u3089\u3001\u3082\u3046\u4E00\u5EA6\u30B3\u30D4\u30FC\u3057\u3066\u304F\u3060\u3055\u3044",failedToResize:"\u753B\u50CF\u306E\u30EA\u30B5\u30A4\u30BA\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToPerformAction:"{action}\u306B\u5931\u6557\u3057\u307E\u3057\u305F",imageTooLargeToCopy:"\u753B\u50CF\u304C\u5927\u304D\u3059\u304E\u3066\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3067\u304D\u307E\u305B\u3093",fetchingLocalNetworkImage:"\u30ED\u30FC\u30AB\u30EB\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u30A2\u30C9\u30EC\u30B9\u304B\u3089\u753B\u50CF\u3092\u53D6\u5F97\u3057\u3066\u3044\u307E\u3059",failedToFetchExternalImage:"\u5916\u90E8\u753B\u50CF\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F (HTTP {status})",externalImageNotImage:"URL \u304C\u753B\u50CF\u3092\u8FD4\u3057\u307E\u305B\u3093\u3067\u3057\u305F",externalImageFetchTimedOut:"\u5916\u90E8\u753B\u50CF\u306E\u53D6\u5F97\u304C\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8\u3057\u307E\u3057\u305F",failedToCopyUrl:"\u753B\u50CFURL\u306E\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToCopyImage:"\u753B\u50CF\u306E\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u3078\u306E\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToCopyPath:"\u30D5\u30A1\u30A4\u30EB\u30D1\u30B9\u306E\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToResizeTo:"\u753B\u50CF\u306E{size}\u3078\u306E\u30EA\u30B5\u30A4\u30BA\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToRemoveSize:"\u753B\u50CF\u304B\u3089\u30AB\u30B9\u30BF\u30E0\u30B5\u30A4\u30BA\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenExplorer:"\u30B7\u30B9\u30C6\u30E0\u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC\u306E\u8D77\u52D5\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToRenameImage:"\u753B\u50CF\u540D\u306E\u5909\u66F4\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToDeleteImage:"\u753B\u50CF\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenInNewTab:"\u65B0\u3057\u3044\u30BF\u30D6\u3067\u753B\u50CF\u3092\u958B\u304F\u306E\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenToTheRight:"\u53F3\u5074\u3067\u753B\u50CF\u3092\u958B\u304F\u306E\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenInNewWindow:"\u65B0\u3057\u3044\u30A6\u30A3\u30F3\u30C9\u30A6\u3067\u753B\u50CF\u3092\u958B\u304F\u306E\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenInDefaultApp:"\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u958B\u304F\u306E\u306B\u5931\u6557\u3057\u307E\u3057\u305F",failedToOpenInEditor:"{editor}\u3067\u753B\u50CF\u3092\u958B\u304F\u306E\u306B\u5931\u6557\u3057\u307E\u3057\u305F"},settings:{headings:{menuOptions:"\u500B\u5225\u30E1\u30CB\u30E5\u30FC\u30AA\u30D7\u30B7\u30E7\u30F3\u306E\u5207\u308A\u66FF\u3048",mousewheelZoom:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u30BA\u30FC\u30E0",externalEditor:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC",advanced:"\u9AD8\u5EA6\u306A\u8A2D\u5B9A"},items:{whatsNew:{name:"Pixel Perfect Image {version} \u306E\u65B0\u6A5F\u80FD",desc:"\u6700\u65B0\u306E\u5909\u66F4\u70B9\u3084\u6539\u5584\u70B9\u3092\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002",buttonText:"\u6700\u8FD1\u306E\u66F4\u65B0\u3092\u898B\u308B"},fileInfo:{name:"\u30D5\u30A1\u30A4\u30EB\u60C5\u5831",desc:"\u30E1\u30CB\u30E5\u30FC\u306E\u4E0A\u90E8\u306B\u30D5\u30A1\u30A4\u30EB\u540D\u3068\u30B5\u30A4\u30BA\u3092\u8868\u793A\u3057\u307E\u3059"},showInExplorer:{name:"Show in Finder/\u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC",desc:"\u30B7\u30B9\u30C6\u30E0\u30D5\u30A1\u30A4\u30EB\u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC\u3067\u753B\u50CF\u3092\u8868\u793A\u3059\u308B\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},renameImage:{name:"\u753B\u50CF\u540D\u3092\u5909\u66F4",desc:"\u753B\u50CF\u30D5\u30A1\u30A4\u30EB\u540D\u3092\u5909\u66F4\u3059\u308B\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},deleteImage:{name:"\u753B\u50CF\u3068\u30EA\u30F3\u30AF\u3092\u524A\u9664",desc:"\u753B\u50CF\u30D5\u30A1\u30A4\u30EB\u3068\u30EA\u30F3\u30AF\u306E\u4E21\u65B9\u3092\u524A\u9664\u3059\u308B\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},openInNewTab:{name:"\u65B0\u3057\u3044\u30BF\u30D6\u3067\u958B\u304F",desc:"\u753B\u50CF\u3092\u65B0\u3057\u3044\u30BF\u30D6\u3067\u958B\u304F\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},openToTheRight:{name:"\u53F3\u306B\u958B\u304F",desc:"\u753B\u50CF\u3092\u53F3\u5074\u306E\u5206\u5272\u3067\u958B\u304F\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},openInNewWindow:{name:"\u65B0\u3057\u3044\u30A6\u30A3\u30F3\u30C9\u30A6\u3067\u958B\u304F",desc:"\u753B\u50CF\u3092\u65B0\u3057\u3044\u30A6\u30A3\u30F3\u30C9\u30A6\u3067\u958B\u304F\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},openInDefaultApp:{name:"\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u958B\u304F",desc:"\u753B\u50CF\u3092\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u958B\u304F\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A\u3057\u307E\u3059"},resizeOptions:{name:"\u30EA\u30B5\u30A4\u30BA\u30AA\u30D7\u30B7\u30E7\u30F3",desc:"\u30EA\u30B5\u30A4\u30BA\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u8A2D\u5B9A\u3057\u307E\u3059\uFF08\u30AB\u30F3\u30DE\u533A\u5207\u308A\uFF09\u3002\u30D1\u30FC\u30BB\u30F3\u30C6\u30FC\u30B8\u306B\u306F%\u3092\u4F7F\u7528\u3057\uFF08\u4F8B\uFF1A25%\u300150%\uFF09\u3001\u30D4\u30AF\u30BB\u30EB\u306B\u306Fpx\u3092\u4F7F\u7528\u3057\u307E\u3059\uFF08\u4F8B\uFF1A600px\u3001800px\uFF09",placeholder:"\u4F8B\uFF1A25%\u300150%\u3001100%\u3001600px"},cmdClickBehavior:{name:"{cmd} + \u30AF\u30EA\u30C3\u30AF\u306E\u52D5\u4F5C",desc:"\u753B\u50CF\u3092{cmd} + \u30AF\u30EA\u30C3\u30AF\u3057\u305F\u3068\u304D\u306E\u52D5\u4F5C\u3092\u9078\u629E\u3057\u307E\u3059",options:{doNothing:"\u4F55\u3082\u3057\u306A\u3044",openInNewTab:"\u65B0\u3057\u3044\u30BF\u30D6\u3067\u958B\u304F",openInDefaultApp:"\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u958B\u304F",openInEditor:"{editor}\u3067\u958B\u304F"}},enableWheelZoom:{name:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u30BA\u30FC\u30E0\u3092\u6709\u52B9\u306B\u3059\u308B",desc:"\u4FEE\u98FE\u30AD\u30FC\u3092\u62BC\u3057\u306A\u304C\u3089\u30B9\u30AF\u30ED\u30FC\u30EB\u3057\u3066\u753B\u50CF\u3092\u30EA\u30B5\u30A4\u30BA\u3057\u307E\u3059"},modifierKey:{name:"\u4FEE\u98FE\u30AD\u30FC",desc:"\u753B\u50CF\u3092\u30BA\u30FC\u30E0\u3059\u308B\u305F\u3081\u306B\u30B9\u30AF\u30ED\u30FC\u30EB\u6642\u306B\u62BC\u3059\u5FC5\u8981\u304C\u3042\u308B\u30AD\u30FC",options:{alt:"Alt",option:"Option",ctrl:"Ctrl",shift:"Shift"}},zoomStepSize:{name:"\u30BA\u30FC\u30E0\u30B9\u30C6\u30C3\u30D7\u30B5\u30A4\u30BA",desc:"\u30B9\u30AF\u30ED\u30FC\u30EB\u30B9\u30C6\u30C3\u30D7\u3054\u3068\u306E\u30BA\u30FC\u30E0\u7387",resetToDefault:"\u30C7\u30D5\u30A9\u30EB\u30C8\u306B\u30EA\u30BB\u30C3\u30C8"},invertScroll:{name:"\u30B9\u30AF\u30ED\u30FC\u30EB\u65B9\u5411\u3092\u53CD\u8EE2",desc:"\u30B9\u30AF\u30ED\u30FC\u30EB\u6642\u306E\u30BA\u30FC\u30E0\u65B9\u5411\u3092\u53CD\u8EE2\u3057\u307E\u3059"},externalEditorName:{name:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u540D",desc:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u306E\u540D\u524D\uFF08\u4F8B\uFF1APhotoshop\uFF09",placeholder:"Photoshop"},externalEditorPathMac:{name:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u30D1\u30B9\uFF08macOS\uFF09",desc:"macOS\u4E0A\u306E\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u3078\u306E\u30D5\u30EB\u30D1\u30B9",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u30D1\u30B9\uFF08Windows\uFF09",desc:"Windows\u4E0A\u306E\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u3078\u306E\u30D5\u30EB\u30D1\u30B9",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u306E\u30D1\u30B9\uFF08Linux\uFF09",desc:"Linux \u306E\u5916\u90E8\u30A8\u30C7\u30A3\u30BF\u30FC\u30A2\u30D7\u30EA\u306E\u30D5\u30EB\u30D1\u30B9",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"\u524A\u9664\u524D\u306B\u78BA\u8A8D",desc:"\u30D5\u30A1\u30A4\u30EB\u524A\u9664\u524D\u306B\u78BA\u8A8D\u30C0\u30A4\u30A2\u30ED\u30B0\u3092\u8868\u793A\u3057\u307E\u3059"},debugMode:{name:"\u30C7\u30D0\u30C3\u30B0\u30E2\u30FC\u30C9",desc:"\u30B3\u30F3\u30BD\u30FC\u30EB\u306B\u30C7\u30D0\u30C3\u30B0\u30ED\u30B0\u3092\u51FA\u529B\u3057\u307E\u3059"}}},modals:{rename:{title:"\u753B\u50CF\u540D\u3092\u5909\u66F4",renameButton:"\u5909\u66F4",cancelButton:"\u30AD\u30E3\u30F3\u30BB\u30EB"},delete:{title:"\u753B\u50CF\u3092\u524A\u9664",confirmMessage:'"{filename}"\u3092\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F',warningMessage:"\u3053\u308C\u306B\u3088\u308A\u3001\u753B\u50CF\u30D5\u30A1\u30A4\u30EB\u3068\u73FE\u5728\u306E\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u5185\u306E\u3059\u3079\u3066\u306E\u30EA\u30F3\u30AF\u304C\u524A\u9664\u3055\u308C\u307E\u3059\u3002",deleteButton:"\u524A\u9664",cancelButton:"\u30AD\u30E3\u30F3\u30BB\u30EB"}},whatsNew:{title:"Pixel Perfect Image \u306E\u65B0\u6A5F\u80FD",categories:{new:"\u65B0\u6A5F\u80FD",improved:"\u6539\u5584",changed:"\u5909\u66F4",fixed:"\u4FEE\u6B63"},supportMessage:"Pixel Perfect Image \u304C\u5F79\u306B\u7ACB\u3063\u305F\u3089\u3001\u958B\u767A\u306E\u652F\u63F4\u3092\u3054\u691C\u8A0E\u304F\u3060\u3055\u3044\u3002",supportButton:"\u30B3\u30FC\u30D2\u30FC\u3092\u304A\u3054\u308B",thanksButton:"\u3042\u308A\u304C\u3068\u3046\uFF01"},actions:{performAction:"\u30A2\u30AF\u30B7\u30E7\u30F3\u3092\u5B9F\u884C",openInNewTab:"\u65B0\u3057\u3044\u30BF\u30D6\u3067\u753B\u50CF\u3092\u958B\u304F",openToTheRight:"\u53F3\u5074\u3067\u753B\u50CF\u3092\u958B\u304F",openInNewWindow:"\u65B0\u3057\u3044\u30A6\u30A3\u30F3\u30C9\u30A6\u3067\u753B\u50CF\u3092\u958B\u304F",openInDefaultApp:"\u30C7\u30D5\u30A9\u30EB\u30C8\u30A2\u30D7\u30EA\u3067\u753B\u50CF\u3092\u958B\u304F",openInEditor:"{editor}\u3067\u753B\u50CF\u3092\u958B\u304F"}}});var ze,Oe=k(()=>{ze={menu:{remoteImage:"\u8FDC\u7A0B\u56FE\u50CF",copyImageUrl:"\u590D\u5236\u56FE\u50CFURL",copyImage:"\u590D\u5236\u56FE\u50CF",copyLocalPath:"\u590D\u5236\u672C\u5730\u8DEF\u5F84",resizeTo:"\u8C03\u6574\u5927\u5C0F\u5230{size}",removeCustomSize:"\u79FB\u9664\u81EA\u5B9A\u4E49\u5C3A\u5BF8",showInFinder:"Show in Finder",showInExplorer:"\u5728\u8D44\u6E90\u7BA1\u7406\u5668\u4E2D\u663E\u793A",renameImage:"\u91CD\u547D\u540D\u56FE\u50CF",deleteImageAndLink:"\u5220\u9664\u56FE\u50CF\u548C\u94FE\u63A5",openInNewTab:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00",openToTheRight:"\u5728\u53F3\u4FA7\u6253\u5F00",openInNewWindow:"\u5728\u65B0\u7A97\u53E3\u4E2D\u6253\u5F00",openInDefaultApp:"\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00",openInEditor:"\u5728{editor}\u4E2D\u6253\u5F00"},notices:{imageUrlCopied:"\u56FE\u50CFURL\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",imageCopied:"\u56FE\u50CF\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",filePathCopied:"\u6587\u4EF6\u8DEF\u5F84\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",customSizeRemoved:"\u5DF2\u4ECE\u56FE\u50CF\u4E2D\u79FB\u9664\u81EA\u5B9A\u4E49\u5C3A\u5BF8",imageRenamed:"\u56FE\u50CF\u91CD\u547D\u540D\u6210\u529F",imageAndLinksDeleted:"\u56FE\u50CF\u548C\u94FE\u63A5\u5220\u9664\u6210\u529F",imageDeleted:"\u56FE\u50CF\u5220\u9664\u6210\u529F",couldNotReadDimensions:"\u65E0\u6CD5\u8BFB\u53D6\u56FE\u50CF\u5C3A\u5BF8",couldNotDetermineSvgDimensions:"\u65E0\u6CD5\u786E\u5B9A SVG \u5C3A\u5BF8\uFF08\u7F3A\u5C11 width/height/viewBox\uFF09",couldNotDetermineImageDimensions:"\u65E0\u6CD5\u786E\u5B9A\u56FE\u50CF\u5C3A\u5BF8",cannotCopyPath:"\u65E0\u6CD5\u590D\u5236\u8DEF\u5F84 - \u672A\u4F7F\u7528\u6587\u4EF6\u7CFB\u7EDF\u9002\u914D\u5668",couldNotLocateImage:"\u65E0\u6CD5\u627E\u5230\u56FE\u50CF\u6587\u4EF6",setEditorPath:"\u8BF7\u5728Pixel Perfect Image\u8BBE\u7F6E\u4E2D\u8BBE\u7F6E\u60A8\u7684{editor}\u8DEF\u5F84\u3002",cannotOpenFile:"\u65E0\u6CD5\u6253\u5F00\u6587\u4EF6\uFF1A\u6B64\u4FDD\u7BA1\u5E93\u4F7F\u7528\u975E\u6807\u51C6\u5B58\u50A8\u7CFB\u7EDF",couldNotOpenInEditor:"\u65E0\u6CD5\u5728{editor}\u4E2D\u6253\u5F00\u6587\u4EF6\u3002",failedToRename:"\u91CD\u547D\u540D\u56FE\u50CF\u5931\u8D25",failedToDelete:"\u5220\u9664\u56FE\u50CF\u548C\u94FE\u63A5\u5931\u8D25",clickInEditorFirst:"\u8BF7\u5148\u70B9\u51FB\u7F16\u8F91\u5668\uFF0C\u7136\u540E\u518D\u6B21\u5C1D\u8BD5\u590D\u5236",failedToResize:"\u8C03\u6574\u56FE\u50CF\u5927\u5C0F\u5931\u8D25",failedToPerformAction:"{action}\u5931\u8D25",imageTooLargeToCopy:"\u56FE\u50CF\u592A\u5927\uFF0C\u65E0\u6CD5\u590D\u5236\u5230\u526A\u8D34\u677F",fetchingLocalNetworkImage:"\u6B63\u5728\u4ECE\u672C\u5730\u7F51\u7EDC\u5730\u5740\u83B7\u53D6\u56FE\u50CF",failedToFetchExternalImage:"\u83B7\u53D6\u5916\u90E8\u56FE\u50CF\u5931\u8D25\uFF08HTTP {status}\uFF09",externalImageNotImage:"URL \u672A\u8FD4\u56DE\u56FE\u50CF",externalImageFetchTimedOut:"\u83B7\u53D6\u5916\u90E8\u56FE\u50CF\u8D85\u65F6",failedToCopyUrl:"\u590D\u5236\u56FE\u50CFURL\u5931\u8D25",failedToCopyImage:"\u590D\u5236\u56FE\u50CF\u5230\u526A\u8D34\u677F\u5931\u8D25",failedToCopyPath:"\u590D\u5236\u6587\u4EF6\u8DEF\u5F84\u5931\u8D25",failedToResizeTo:"\u5C06\u56FE\u50CF\u8C03\u6574\u5230{size}\u5931\u8D25",failedToRemoveSize:"\u4ECE\u56FE\u50CF\u4E2D\u79FB\u9664\u81EA\u5B9A\u4E49\u5C3A\u5BF8\u5931\u8D25",failedToOpenExplorer:"\u6253\u5F00\u7CFB\u7EDF\u8D44\u6E90\u7BA1\u7406\u5668\u5931\u8D25",failedToRenameImage:"\u91CD\u547D\u540D\u56FE\u50CF\u5931\u8D25",failedToDeleteImage:"\u5220\u9664\u56FE\u50CF\u5931\u8D25",failedToOpenInNewTab:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00\u56FE\u50CF\u5931\u8D25",failedToOpenToTheRight:"\u5728\u53F3\u4FA7\u6253\u5F00\u56FE\u50CF\u5931\u8D25",failedToOpenInNewWindow:"\u5728\u65B0\u7A97\u53E3\u4E2D\u6253\u5F00\u56FE\u50CF\u5931\u8D25",failedToOpenInDefaultApp:"\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00\u5931\u8D25",failedToOpenInEditor:"\u5728{editor}\u4E2D\u6253\u5F00\u56FE\u50CF\u5931\u8D25"},settings:{headings:{menuOptions:"\u5207\u6362\u5355\u4E2A\u83DC\u5355\u9009\u9879",mousewheelZoom:"\u9F20\u6807\u6EDA\u8F6E\u7F29\u653E",externalEditor:"\u5916\u90E8\u7F16\u8F91\u5668",advanced:"\u9AD8\u7EA7"},items:{whatsNew:{name:"Pixel Perfect Image {version} \u7684\u65B0\u529F\u80FD",desc:"\u67E5\u770B\u6700\u65B0\u7684\u66F4\u6539\u4E0E\u6539\u8FDB\u3002",buttonText:"\u67E5\u770B\u6700\u8FD1\u66F4\u65B0"},fileInfo:{name:"\u6587\u4EF6\u4FE1\u606F",desc:"\u5728\u83DC\u5355\u9876\u90E8\u663E\u793A\u6587\u4EF6\u540D\u548C\u5C3A\u5BF8"},showInExplorer:{name:"Show in Finder/\u8D44\u6E90\u7BA1\u7406\u5668",desc:"\u663E\u793A\u5728\u7CFB\u7EDF\u6587\u4EF6\u8D44\u6E90\u7BA1\u7406\u5668\u4E2D\u663E\u793A\u56FE\u50CF\u7684\u9009\u9879"},renameImage:{name:"\u91CD\u547D\u540D\u56FE\u50CF",desc:"\u663E\u793A\u91CD\u547D\u540D\u56FE\u50CF\u6587\u4EF6\u7684\u9009\u9879"},deleteImage:{name:"\u5220\u9664\u56FE\u50CF\u548C\u94FE\u63A5",desc:"\u663E\u793A\u5220\u9664\u56FE\u50CF\u6587\u4EF6\u548C\u94FE\u63A5\u7684\u9009\u9879"},openInNewTab:{name:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00",desc:"\u663E\u793A\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00\u56FE\u50CF\u7684\u9009\u9879"},openToTheRight:{name:"\u5728\u53F3\u4FA7\u6253\u5F00",desc:"\u663E\u793A\u5728\u53F3\u4FA7\u5206\u5C4F\u4E2D\u6253\u5F00\u56FE\u50CF\u7684\u9009\u9879"},openInNewWindow:{name:"\u5728\u65B0\u7A97\u53E3\u4E2D\u6253\u5F00",desc:"\u663E\u793A\u5728\u65B0\u7684\u5E94\u7528\u7A97\u53E3\u4E2D\u6253\u5F00\u56FE\u50CF\u7684\u9009\u9879"},openInDefaultApp:{name:"\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00",desc:"\u663E\u793A\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00\u56FE\u50CF\u7684\u9009\u9879"},resizeOptions:{name:"\u8C03\u6574\u5927\u5C0F\u9009\u9879",desc:"\u8BBE\u7F6E\u8C03\u6574\u5927\u5C0F\u9009\u9879\uFF08\u7528\u9017\u53F7\u5206\u9694\uFF09\u3002\u4F7F\u7528%\u8868\u793A\u767E\u5206\u6BD4\uFF08\u4F8B\u5982\uFF1A25%\u300150%\uFF09\u6216px\u8868\u793A\u50CF\u7D20\uFF08\u4F8B\u5982\uFF1A600px\u3001800px\uFF09",placeholder:"\u4F8B\u5982\uFF1A25%\u300150%\u3001100%\u3001600px"},cmdClickBehavior:{name:"{cmd} + \u70B9\u51FB\u884C\u4E3A",desc:"\u9009\u62E9{cmd} + \u70B9\u51FB\u56FE\u50CF\u65F6\u7684\u884C\u4E3A",options:{doNothing:"\u4EC0\u4E48\u90FD\u4E0D\u505A",openInNewTab:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00",openInDefaultApp:"\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00",openInEditor:"\u5728{editor}\u4E2D\u6253\u5F00"}},enableWheelZoom:{name:"\u542F\u7528\u9F20\u6807\u6EDA\u8F6E\u7F29\u653E",desc:"\u6309\u4F4F\u4FEE\u9970\u952E\u5E76\u6EDA\u52A8\u4EE5\u8C03\u6574\u56FE\u50CF\u5927\u5C0F"},modifierKey:{name:"\u4FEE\u9970\u952E",desc:"\u6EDA\u52A8\u7F29\u653E\u56FE\u50CF\u65F6\u9700\u8981\u6309\u4F4F\u7684\u952E",options:{alt:"Alt",option:"Option",ctrl:"Ctrl",shift:"Shift"}},zoomStepSize:{name:"\u7F29\u653E\u6B65\u957F",desc:"\u6BCF\u6B21\u6EDA\u52A8\u6B65\u957F\u7684\u7F29\u653E\u767E\u5206\u6BD4",resetToDefault:"\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C"},invertScroll:{name:"\u53CD\u8F6C\u6EDA\u52A8\u65B9\u5411",desc:"\u53CD\u8F6C\u6EDA\u52A8\u65F6\u7684\u7F29\u653E\u65B9\u5411"},externalEditorName:{name:"\u5916\u90E8\u7F16\u8F91\u5668\u540D\u79F0",desc:"\u60A8\u7684\u5916\u90E8\u7F16\u8F91\u5668\u540D\u79F0\uFF08\u4F8B\u5982\uFF1APhotoshop\uFF09",placeholder:"Photoshop"},externalEditorPathMac:{name:"\u5916\u90E8\u7F16\u8F91\u5668\u8DEF\u5F84\uFF08macOS\uFF09",desc:"macOS\u4E0A\u5916\u90E8\u7F16\u8F91\u5668\u5E94\u7528\u7A0B\u5E8F\u7684\u5B8C\u6574\u8DEF\u5F84",placeholder:"/Applications/Adobe Photoshop 2025/Adobe Photoshop 2025.app"},externalEditorPathWin:{name:"\u5916\u90E8\u7F16\u8F91\u5668\u8DEF\u5F84\uFF08Windows\uFF09",desc:"Windows\u4E0A\u5916\u90E8\u7F16\u8F91\u5668\u5E94\u7528\u7A0B\u5E8F\u7684\u5B8C\u6574\u8DEF\u5F84",placeholder:"C:\\Program Files\\Adobe\\Adobe Photoshop 2025\\Photoshop.exe"},externalEditorPathLinux:{name:"\u5916\u90E8\u7F16\u8F91\u5668\u8DEF\u5F84\uFF08Linux\uFF09",desc:"Linux \u4E0A\u5916\u90E8\u7F16\u8F91\u5668\u7684\u5B8C\u6574\u8DEF\u5F84",placeholder:"/usr/bin/gimp"},confirmDelete:{name:"\u5220\u9664\u524D\u786E\u8BA4",desc:"\u5220\u9664\u6587\u4EF6\u524D\u663E\u793A\u786E\u8BA4\u5BF9\u8BDD\u6846"},debugMode:{name:"\u8C03\u8BD5\u6A21\u5F0F",desc:"\u5728\u63A7\u5236\u53F0\u4E2D\u542F\u7528\u8C03\u8BD5\u65E5\u5FD7"}}},modals:{rename:{title:"\u91CD\u547D\u540D\u56FE\u50CF",renameButton:"\u91CD\u547D\u540D",cancelButton:"\u53D6\u6D88"},delete:{title:"\u5220\u9664\u56FE\u50CF",confirmMessage:'\u60A8\u786E\u5B9A\u8981\u5220\u9664"{filename}"\u5417\uFF1F',warningMessage:"\u8FD9\u5C06\u5220\u9664\u56FE\u50CF\u6587\u4EF6\u4EE5\u53CA\u5F53\u524D\u6587\u6863\u4E2D\u6240\u6709\u6307\u5411\u5B83\u7684\u94FE\u63A5\u3002",deleteButton:"\u5220\u9664",cancelButton:"\u53D6\u6D88"}},whatsNew:{title:"Pixel Perfect Image \u7684\u65B0\u529F\u80FD",categories:{new:"\u65B0\u529F\u80FD",improved:"\u6539\u8FDB",changed:"\u66F4\u6539",fixed:"\u4FEE\u590D"},supportMessage:"\u5982\u679C Pixel Perfect Image \u5BF9\u4F60\u6709\u5E2E\u52A9\uFF0C\u8BF7\u8003\u8651\u652F\u6301\u5176\u6301\u7EED\u5F00\u53D1\u3002",supportButton:"\u8BF7\u6211\u559D\u676F\u5496\u5561",thanksButton:"\u8C22\u8C22\uFF01"},actions:{performAction:"\u6267\u884C\u64CD\u4F5C",openInNewTab:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00\u56FE\u50CF",openToTheRight:"\u5728\u53F3\u4FA7\u6253\u5F00\u56FE\u50CF",openInNewWindow:"\u5728\u65B0\u7A97\u53E3\u4E2D\u6253\u5F00\u56FE\u50CF",openInDefaultApp:"\u7528\u9ED8\u8BA4\u5E94\u7528\u6253\u5F00\u56FE\u50CF",openInEditor:"\u5728{editor}\u4E2D\u6253\u5F00\u56FE\u50CF"}}});function rt(){return(0,Be.getLanguage)()}function st(){let d=rt();return d&&d in Ue?d:"en"}var Be,Ue,s,A=k(()=>{Be=require("obsidian");De();Le();Me();Re();Fe();Oe();Ue={en:Ce,de:Ne,es:ke,fr:Ae,ja:We,zh:ze};s=Ue[st()]});var ge={};ue(ge,{WhatsNewModal:()=>he});function mt(d){Promise.resolve().then(d).catch(t=>console.error(t))}function Z(d,t,e,n){let i=o=>{mt(()=>e(o))};return d.addEventListener(t,i,n),()=>d.removeEventListener(t,i,n)}function pt(d){let t=new Date(d);return Number.isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}var Ge,he,fe=k(()=>{Ge=require("obsidian");A();he=class extends Ge.Modal{constructor(e,n,i){super(e);this.thanksButton=null;this.domDisposers=[];this.releaseNotes=n,this.onCloseCallback=i}renderFormattedText(e,n){let i=(a,r)=>{let l=/==([\s\S]*?)==|\[([^\]]+)\]\((https?:\/\/[^\s)]+)\)|\*\*([^*]+)\*\*|(https?:\/\/[^\s]+)/g,u=0,m,h=g=>{g.length>0&&r.appendText(g)};for(;(m=l.exec(a))!==null;){if(h(a.slice(u,m.index)),m[1]){let g=r.createSpan({cls:"pixel-perfect-whats-new-highlight"});i(m[1],g)}else if(m[2]&&m[3]){let g=r.createEl("a",{text:m[2]});g.setAttr("href",m[3]),g.setAttr("rel","noopener noreferrer"),g.setAttr("target","_blank")}else if(m[4])r.createEl("strong",{text:m[4]});else if(m[5]){let g=m[5],c="",p=g.match(/[.,;:!?)]+$/);p&&(c=p[0],g=g.slice(0,-c.length));let f=r.createEl("a",{text:g});f.setAttr("href",g),f.setAttr("rel","noopener noreferrer"),f.setAttr("target","_blank"),c&&h(c)}u=l.lastIndex}h(a.slice(u))},o=n.split(`
`);for(let a=0;a<o.length;a++)i(o[a],e),a<o.length-1&&e.createEl("br")}onOpen(){let{contentEl:e}=this;e.empty(),this.modalEl.addClass("pixel-perfect-whats-new-modal"),e.createEl("h2",{text:s.whatsNew.title,cls:"pixel-perfect-whats-new-header"}),this.attachCloseButtonHandler();let n=e.createDiv("pixel-perfect-whats-new-scroll");this.releaseNotes.forEach(u=>{let m=n.createDiv("pixel-perfect-whats-new-version");m.createEl("h3",{text:`Version ${u.version}`}),m.createEl("small",{text:pt(new Date(u.date).getTime())||u.date,cls:"pixel-perfect-whats-new-date"}),u.info&&u.info.split(/\n\s*\n/).forEach(c=>{let p=m.createEl("p",{cls:"pixel-perfect-whats-new-info"});this.renderFormattedText(p,c)}),[{key:"new",label:s.whatsNew.categories.new},{key:"improved",label:s.whatsNew.categories.improved},{key:"changed",label:s.whatsNew.categories.changed},{key:"fixed",label:s.whatsNew.categories.fixed}].forEach(g=>{let c=u[g.key];if(c&&c.length>0){m.createEl("h4",{text:g.label,cls:"pixel-perfect-whats-new-category"});let p=m.createEl("ul",{cls:"pixel-perfect-whats-new-features"});c.forEach(f=>{let w=p.createEl("li");this.renderFormattedText(w,f)})}})}),e.createDiv("pixel-perfect-whats-new-divider"),e.createDiv("pixel-perfect-whats-new-support").createEl("p",{text:s.whatsNew.supportMessage,cls:"pixel-perfect-whats-new-support-text"});let o=e.createDiv("pixel-perfect-whats-new-buttons"),a=o.createEl("button",{cls:"pixel-perfect-whats-new-support-button"});a.setAttr("type","button");let r=a.createSpan({cls:"pixel-perfect-whats-new-support-icon"});r.setAttr("aria-hidden","true"),r.setText("\u2615"),a.createSpan({cls:"pixel-perfect-whats-new-support-button-label",text:s.whatsNew.supportButton}),this.domDisposers.push(Z(a,"click",()=>{window.open("https://www.buymeacoffee.com/johansan")}));let l=o.createEl("button",{text:s.whatsNew.thanksButton,cls:"mod-cta"});this.domDisposers.push(Z(l,"click",()=>{this.close()})),this.thanksButton=l}open(){super.open(),this.thanksButton&&requestAnimationFrame(()=>{var e;(e=this.thanksButton)==null||e.focus()})}onClose(){var n;let{contentEl:e}=this;e.empty(),this.modalEl.removeClass("pixel-perfect-whats-new-modal"),this.domDisposers.length&&(this.domDisposers.forEach(i=>{try{i()}catch(o){console.error("Error disposing what's new modal listener:",o)}}),this.domDisposers=[]),(n=this.onCloseCallback)==null||n.call(this)}attachCloseButtonHandler(){let e=this.modalEl.querySelector(".modal-close-button");if(!e)return;let n=i=>{i.preventDefault(),this.close()};this.domDisposers.push(Z(e,"click",n)),this.domDisposers.push(Z(e,"pointerdown",n))}}});var we={};ue(we,{compareVersions:()=>ht,getLatestReleaseNotes:()=>Ze,getReleaseNotesBetweenVersions:()=>ut,isReleaseAutoDisplayEnabled:()=>gt});function ut(d,t){let e=B.findIndex(a=>a.version===d),n=B.findIndex(a=>a.version===t);if(e===-1||n===-1)return Ze();let i=Math.min(e,n),o=Math.max(e,n);return B.slice(i,o+1)}function Ze(d=5){return B.slice(0,d)}function ht(d,t){let e=d.split(".").map(Number),n=t.split(".").map(Number);for(let i=0;i<Math.max(e.length,n.length);i+=1){let o=e[i]||0,a=n[i]||0;if(o>a)return 1;if(o<a)return-1}return 0}function gt(d){let t=B.find(e=>e.version===d);return t?t.showOnUpdate!==!1:!0}var B,Ie=k(()=>{B=[{version:"1.0.24",date:"2026-01-07",showOnUpdate:!0,new:["External images can now be copied to the clipboard.","External images can now be resized like local images."],improved:["==Finally fixed image resizing on mobile trackpads==! \u{1F389} Give it a go and let me know if it works for you!"],changed:[],fixed:[]},{version:"1.0.23",date:"2025-12-16",showOnUpdate:!0,new:["==SVG Support==. You can now resize SVG images like any other image. Copying SVG images is not supported since Obsidian clipboard only supports bitmap images."],improved:["Settings now support the new ==SettingGroup API== in Obsidian 1.11 and later. Settings groups are now clearly outlined."],changed:[],fixed:[]}]});var wt={};ue(wt,{default:()=>se});module.exports=at(wt);var Qe=require("obsidian");var I=require("obsidian");A();var M=require("obsidian");function lt(){return typeof M.SettingGroup=="function"&&typeof M.requireApiVersion=="function"&&(0,M.requireApiVersion)("1.11.0")}function He(d){let t=lt();return e=>{!t&&e&&new M.Setting(d).setName(e).setHeading();let n=d.createDiv();if(t){n.addClass("setting-group");let i=new M.SettingGroup(n);return e&&i.setHeading(e),{rootEl:n,addSetting:o=>{let a=null;if(i.addSetting(r=>{a=r,o(r)}),!a)throw new Error("SettingGroup.addSetting did not provide a Setting");return a}}}return{rootEl:n,addSetting:i=>{let o=new M.Setting(n);return i(o),o}}}}var dt="pixel-perfect-setting-hidden";function _e(d,t){d.classList.toggle(dt,!t)}function ct(d,t="pixel-perfect-sub-settings"){let e=d.settingEl.ownerDocument.createElement("div");return e.className=t,d.settingEl.after(e),e}function Ve(d,t,e,n="pixel-perfect-sub-settings"){let i=ct(d,n);return _e(i,t()),d.addToggle(o=>{o.setValue(t()).onChange(a=>{_e(i,a);try{let r=e(a);r instanceof Promise&&r.catch(l=>console.error("Failed to persist setting:",l))}catch(r){console.error("Failed to persist setting:",r)}})}),i}var ve={toggleIndividualMenuOptions:!1,showFileInfo:!0,showShowInFileExplorer:!0,showRenameOption:!0,showDeleteImageOption:!0,showOpenInNewTab:!0,showOpenToTheRight:!0,showOpenInNewWindow:!0,showOpenInDefaultApp:!0,customResizeSizes:["25%","50%","100%"],cmdCtrlClickBehavior:"do-nothing",enableWheelZoom:!0,wheelModifierKey:"Alt",wheelZoomPercentage:20,invertScrollDirection:!1,externalEditorName:"",externalEditorPathMac:"",externalEditorPathWin:"",externalEditorPathLinux:"",confirmBeforeDelete:!0,debugMode:!1,lastShownVersion:""};function K(d){let t=d.trim().match(/^([1-9]\d*)(px|%)$/i);return t?{amount:Number.parseInt(t[1],10),unit:t[2].toLowerCase()}:null}function xe(d){let t=new Set,e=[];for(let n of d){let i=n.trim().toLowerCase();i&&K(i)&&(t.has(i)||(t.add(i),e.push(i)))}return e}function j(d){return I.Platform.isMacOS?d.externalEditorPathMac:I.Platform.isWin?d.externalEditorPathWin:d.externalEditorPathLinux}var $=class extends I.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e,typeof I.requireApiVersion=="function"&&(0,I.requireApiVersion)("1.11.0")&&(this.icon="image")}async display(){let{containerEl:t}=this;t.empty();let e=He(t),n=e(void 0),i=async()=>{try{await this.plugin.saveSettings()}catch(c){console.error("Failed to save settings:",c)}},o=()=>{this.plugin.requestSaveSettings().catch(c=>console.error("Failed to save settings:",c))},a=this.plugin.manifest.version;n.addSetting(c=>{c.setName(s.settings.items.whatsNew.name.replace("{version}",a)).setDesc(s.settings.items.whatsNew.desc).addButton(p=>p.setButtonText(s.settings.items.whatsNew.buttonText).onClick(()=>{(async()=>{let{WhatsNewModal:f}=await Promise.resolve().then(()=>(fe(),ge)),{getLatestReleaseNotes:w}=await Promise.resolve().then(()=>(Ie(),we));new f(this.app,w()).open()})()}))});let r=n.addSetting(c=>{c.setName(s.settings.headings.menuOptions).setDesc("Show settings to toggle individual menu items")}),l=Ve(r,()=>this.plugin.settings.toggleIndividualMenuOptions,c=>{this.plugin.settings.toggleIndividualMenuOptions=c,i()});new I.Setting(l).setName(s.settings.items.fileInfo.name).setDesc(s.settings.items.fileInfo.desc).addToggle(c=>{c.setValue(this.plugin.settings.showFileInfo).onChange(async p=>{this.plugin.settings.showFileInfo=p,i()})}),new I.Setting(l).setName(s.settings.items.showInExplorer.name).setDesc(s.settings.items.showInExplorer.desc).addToggle(c=>c.setValue(this.plugin.settings.showShowInFileExplorer).onChange(async p=>{this.plugin.settings.showShowInFileExplorer=p,i()})),new I.Setting(l).setName(s.settings.items.renameImage.name).setDesc(s.settings.items.renameImage.desc).addToggle(c=>c.setValue(this.plugin.settings.showRenameOption).onChange(async p=>{this.plugin.settings.showRenameOption=p,i()})),new I.Setting(l).setName(s.settings.items.deleteImage.name).setDesc(s.settings.items.deleteImage.desc).addToggle(c=>c.setValue(this.plugin.settings.showDeleteImageOption).onChange(async p=>{this.plugin.settings.showDeleteImageOption=p,i()})),new I.Setting(l).setName(s.settings.items.openInNewTab.name).setDesc(s.settings.items.openInNewTab.desc).addToggle(c=>c.setValue(this.plugin.settings.showOpenInNewTab).onChange(async p=>{this.plugin.settings.showOpenInNewTab=p,i()})),new I.Setting(l).setName(s.settings.items.openToTheRight.name).setDesc(s.settings.items.openToTheRight.desc).addToggle(c=>c.setValue(this.plugin.settings.showOpenToTheRight).onChange(async p=>{this.plugin.settings.showOpenToTheRight=p,i()})),new I.Setting(l).setName(s.settings.items.openInNewWindow.name).setDesc(s.settings.items.openInNewWindow.desc).addToggle(c=>c.setValue(this.plugin.settings.showOpenInNewWindow).onChange(async p=>{this.plugin.settings.showOpenInNewWindow=p,i()})),new I.Setting(l).setName(s.settings.items.openInDefaultApp.name).setDesc(s.settings.items.openInDefaultApp.desc).addToggle(c=>c.setValue(this.plugin.settings.showOpenInDefaultApp).onChange(async p=>{this.plugin.settings.showOpenInDefaultApp=p,i()})),n.addSetting(c=>{c.setName(s.settings.items.resizeOptions.name).setDesc(s.settings.items.resizeOptions.desc).addText(p=>{p.setPlaceholder(s.settings.items.resizeOptions.placeholder).setValue(this.plugin.settings.customResizeSizes.join(", ")).onChange(async f=>{let w=xe(f.split(","));this.plugin.settings.customResizeSizes=w,o()})})});let u=I.Platform.isMacOS?"CMD":"CTRL";n.addSetting(c=>{c.setName(s.settings.items.cmdClickBehavior.name.replace("{cmd}",u)).setDesc(s.settings.items.cmdClickBehavior.desc.replace("{cmd}",u)).addDropdown(p=>{let f=this.plugin.settings.externalEditorName.trim()||"external editor";p.addOption("do-nothing",s.settings.items.cmdClickBehavior.options.doNothing).addOption("open-in-new-tab",s.settings.items.cmdClickBehavior.options.openInNewTab).addOption("open-in-default-app",s.settings.items.cmdClickBehavior.options.openInDefaultApp).addOption("open-in-external-editor",s.settings.items.cmdClickBehavior.options.openInEditor.replace("{editor}",f)).setValue(this.plugin.settings.cmdCtrlClickBehavior).onChange(async w=>{this.plugin.settings.cmdCtrlClickBehavior=w,i()})})});let m=e(s.settings.headings.mousewheelZoom);m.addSetting(c=>{c.setName(s.settings.items.enableWheelZoom.name).setDesc(s.settings.items.enableWheelZoom.desc).addToggle(p=>{p.setValue(this.plugin.settings.enableWheelZoom).onChange(async f=>{this.plugin.settings.enableWheelZoom=f,i()})})}),m.addSetting(c=>{c.setName(s.settings.items.modifierKey.name).setDesc(s.settings.items.modifierKey.desc).addDropdown(p=>{let f=I.Platform.isMacOS;p.addOption("Alt",f?s.settings.items.modifierKey.options.option:s.settings.items.modifierKey.options.alt).addOption("Ctrl",s.settings.items.modifierKey.options.ctrl).addOption("Shift",s.settings.items.modifierKey.options.shift).setValue(this.plugin.settings.wheelModifierKey).onChange(async w=>{this.plugin.settings.wheelModifierKey=w,i()})})}),m.addSetting(c=>{c.setName(s.settings.items.zoomStepSize.name).setDesc(s.settings.items.zoomStepSize.desc).addExtraButton(p=>{p.setIcon("reset").setTooltip(s.settings.items.zoomStepSize.resetToDefault).onClick(async()=>{this.plugin.settings.wheelZoomPercentage=ve.wheelZoomPercentage,await i(),this.display()})}).addSlider(p=>{var E;let f=createSpan();f.addClass("pixel-perfect-zoom-value");let w=y=>{f.setText(`${y}%`)};p.setDynamicTooltip().setLimits(1,100,1).setValue(this.plugin.settings.wheelZoomPercentage).onChange(async y=>{w(y),this.plugin.settings.wheelZoomPercentage=y,o()}),w(this.plugin.settings.wheelZoomPercentage),(E=p.sliderEl.parentElement)==null||E.prepend(f)})}),m.addSetting(c=>{c.setName(s.settings.items.invertScroll.name).setDesc(s.settings.items.invertScroll.desc).addToggle(p=>{p.setValue(this.plugin.settings.invertScrollDirection).onChange(async f=>{this.plugin.settings.invertScrollDirection=f,i()})})});let h=e(s.settings.headings.externalEditor);h.addSetting(c=>{c.setName(s.settings.items.externalEditorName.name).setDesc(s.settings.items.externalEditorName.desc).addText(p=>{p.setPlaceholder(s.settings.items.externalEditorName.placeholder).setValue(this.plugin.settings.externalEditorName).onChange(async f=>{this.plugin.settings.externalEditorName=f,o()})})}),I.Platform.isMacOS&&h.addSetting(c=>{c.setName(s.settings.items.externalEditorPathMac.name).setDesc(s.settings.items.externalEditorPathMac.desc).addText(p=>{p.setPlaceholder(s.settings.items.externalEditorPathMac.placeholder).setValue(this.plugin.settings.externalEditorPathMac).onChange(async f=>{let w=f.replace(/\\ /g," ");this.plugin.settings.externalEditorPathMac=w,o()})})}),I.Platform.isWin&&h.addSetting(c=>{c.setName(s.settings.items.externalEditorPathWin.name).setDesc(s.settings.items.externalEditorPathWin.desc).addText(p=>{p.setPlaceholder(s.settings.items.externalEditorPathWin.placeholder).setValue(this.plugin.settings.externalEditorPathWin).onChange(async f=>{let w=f.replace(/\\ /g," ");this.plugin.settings.externalEditorPathWin=w,o()})})}),!I.Platform.isMacOS&&!I.Platform.isWin&&!I.Platform.isMobile&&h.addSetting(c=>{c.setName(s.settings.items.externalEditorPathLinux.name).setDesc(s.settings.items.externalEditorPathLinux.desc).addText(p=>{p.setPlaceholder(s.settings.items.externalEditorPathLinux.placeholder).setValue(this.plugin.settings.externalEditorPathLinux).onChange(async f=>{let w=f.trim();this.plugin.settings.externalEditorPathLinux=w,o()})})});let g=e(s.settings.headings.advanced);g.addSetting(c=>{c.setName(s.settings.items.confirmDelete.name).setDesc(s.settings.items.confirmDelete.desc).addToggle(p=>p.setValue(this.plugin.settings.confirmBeforeDelete).onChange(async f=>{this.plugin.settings.confirmBeforeDelete=f,i()}))}),g.addSetting(c=>{c.setName(s.settings.items.debugMode.name).setDesc(s.settings.items.debugMode.desc).addToggle(p=>{p.setValue(this.plugin.settings.debugMode).onChange(async f=>{this.plugin.settings.debugMode=f,i()})})})}};var H=require("obsidian");var Te=require("obsidian");function z(d){return!d||!(d instanceof HTMLElement)?null:d instanceof HTMLImageElement?d:d.matches('.image-container, .image-embed, img, a.internal-embed[src*=".png"], a.internal-embed[src*=".jpg"], a.internal-embed[src*=".jpeg"], a.internal-embed[src*=".gif"], a.internal-embed[src*=".webp"], a.internal-embed[src*=".svg"]')?d.querySelector("img"):null}function X(d){var t,e,n,i;return[(t=d.getAttribute("data-src"))!=null?t:"",(e=d.getAttribute("src"))!=null?e:"",(n=d.currentSrc)!=null?n:"",(i=d.src)!=null?i:""].map(o=>o.trim()).filter(Boolean)}function Q(d){var e,n;let t=X(d);return(n=(e=t.find(i=>O(i)))!=null?e:t[0])!=null?n:""}function Y(d){return X(d).some(t=>O(t))}function O(d){return/^\s*https?:\/\//i.test(d)}function $e(d){try{let t=new URL(d);if(!O(t.href))return!1;let e=t.hostname.toLowerCase();if(e==="localhost"||e.endsWith(".localhost")||e.endsWith(".local"))return!0;if(/^\d{1,3}(\.\d{1,3}){3}$/.test(e)){let n=e.split(".").map(a=>Number(a));if(n.some(a=>!Number.isInteger(a)||a<0||a>255))return!1;let[i,o]=n;return i===10||i===127||i===169&&o===254||i===192&&o===168||i===172&&o>=16&&o<=31}return!!(e==="::1"||e.startsWith("fe80:")||e.startsWith("fc")||e.startsWith("fd"))}catch(t){return!1}}function T(...d){let t=new Date().toTimeString().split(" ")[0];console.error(`${t}`,...d)}function U(d){try{return decodeURIComponent(d)}catch(t){return d}}function S(d){let t=new Error(d);return t.name="UserVisibleError",t}function F(d){return d instanceof Error&&d.name==="UserVisibleError"}function ft(d){let t=d.trim();if(!t)return null;let e=t.match(/^([1-9]\d*)(?:x([1-9]\d*))?(?:px)?$/i);if(!e)return null;let n=Number.parseInt(e[1],10);if(!Number.isFinite(n)||n<=0)return null;let i=e[2];if(!i)return{width:n};let o=Number.parseInt(i,10);return!Number.isFinite(o)||o<=0?{width:n}:{width:n,height:o}}function C(d){for(let t=d.length-1;t>=0;t-=1){let e=ft(d[t]);if(e)return{index:t,...e}}return null}function Ke(d,t){for(let e of d.workspace.getLeavesOfType("markdown")){let n=e.view;if(n instanceof Te.MarkdownView&&n.containerEl.contains(t))return n}return null}function be(d,t){for(let e of d.workspace.getLeavesOfType("markdown")){let n=e.view;if(n instanceof Te.MarkdownView&&n.file&&n.file.path===t.path)return n.editor}return null}A();var q=/!\[\[([^\]]+)\]\]/g;var R=class R{constructor(t){this.isModifierKeyHeld=!1;this.wheelEventCleanup=null;this.wheelWidthCache=new Map;this.wheelPendingWidth=new Map;this.wheelDebounceTimers=new Map;this.wheelMaxWaitTimers=new Map;this.wheelTargets=new Map;this.wheelDomTargets=new Map;this.wheelComputeQueue=new Map;this.wheelWriteQueue=new Map;this.plugin=t}setModifierKeyState(t){this.isModifierKeyHeld=t}registerWheelEvents(t){this.wheelEventCleanup&&(this.flushAllPendingWheelWrites(),this.wheelEventCleanup(),this.wheelEventCleanup=null);let e=t.document,n=l=>{this.isModifierKeyMatch(l)&&this.setModifierKeyState(!0)},i=l=>{this.isModifierKeyMatch(l)&&(this.setModifierKeyState(!1),this.flushAllPendingWheelWrites())},o=()=>{this.isModifierKeyHeld&&this.setModifierKeyState(!1),this.flushAllPendingWheelWrites()},a=l=>{if(!this.plugin.settings.enableWheelZoom||!(this.isModifierKeyHeld||this.isModifierKeyStillHeld(l)))return;if(!this.isModifierKeyStillHeld(l)){this.isModifierKeyHeld&&(this.setModifierKeyState(!1),this.flushAllPendingWheelWrites());return}this.isModifierKeyHeld||this.setModifierKeyState(!0);let m=z(l.target);if(!m)return;let h=this.getMarkdownFileForElement(m);if(!h)return;let g=null,c=this.plugin.fileService.getFileForImage(m,h);if(c)g={kind:"local",imgFile:c};else if(Y(m)){let p=m.currentSrc||m.src;p&&(g={kind:"remote",url:p})}g&&(l.preventDefault(),l.stopPropagation(),this.handleImageWheel(l,m,h,g).catch(p=>{T("Error handling wheel event:",p),new H.Notice(s.notices.failedToResize)}))},r=new AbortController;e.addEventListener("keydown",n,{signal:r.signal}),e.addEventListener("keyup",i,{signal:r.signal}),t.addEventListener("blur",o,{signal:r.signal}),t.addEventListener("wheel",a,{passive:!1,capture:!0,signal:r.signal}),this.wheelEventCleanup=()=>{r.abort()}}isModifierKeyMatch(t){let e=this.plugin.settings.wheelModifierKey.toLowerCase(),n=t.key.toLowerCase();switch(e){case"alt":return n==="alt"||n==="option";case"ctrl":return n==="ctrl"||n==="control";case"shift":return n==="shift";default:return!1}}isModifierKeyStillHeld(t){switch(this.plugin.settings.wheelModifierKey.toLowerCase()){case"alt":return t.altKey;case"ctrl":return t.ctrlKey;case"shift":return t.shiftKey;default:return!1}}getMarkdownFileForElement(t){for(let e of this.plugin.app.workspace.getLeavesOfType("markdown")){let n=e.view;if(n instanceof H.MarkdownView&&n.file&&n.containerEl.contains(t))return n.file}return null}getWheelWidthCacheKey(t,e){return e.kind==="local"?`${t.path}::local::${e.imgFile.path}`:`${t.path}::remote::${e.url}`}setWheelWidthCache(t,e){if(this.wheelWidthCache.set(t,e),this.wheelWidthCache.size<=R.WHEEL_WIDTH_CACHE_MAX_ENTRIES)return;let n=this.wheelWidthCache.keys().next().value;n&&this.wheelWidthCache.delete(n)}parseWidthFromImageAlt(t){var i,o,a;let e=(i=t.getAttribute("alt"))!=null?i:"";if(!e)return null;let n=e.split("|").map(r=>r.trim()).filter(Boolean);return(a=(o=C(n))==null?void 0:o.width)!=null?a:null}scheduleWheelWidthFlush(t,e,n){this.wheelTargets.set(t,{activeFile:e,target:n});let i=this.wheelDebounceTimers.get(t);i&&clearTimeout(i);let o=setTimeout(()=>{this.wheelDebounceTimers.delete(t),this.flushWheelPendingWidth(t)},R.WHEEL_WRITE_DEBOUNCE_MS);if(this.wheelDebounceTimers.set(t,o),!this.wheelMaxWaitTimers.has(t)){let a=setTimeout(()=>{this.wheelMaxWaitTimers.delete(t),this.flushWheelPendingWidth(t)},R.WHEEL_WRITE_MAX_WAIT_MS);this.wheelMaxWaitTimers.set(t,a)}}flushWheelPendingWidth(t){var a;let e=this.wheelTargets.get(t);if(!e){this.wheelPendingWidth.delete(t);return}let{activeFile:n,target:i}=e,o=((a=this.wheelWriteQueue.get(t))!=null?a:Promise.resolve()).catch(()=>{}).then(async()=>{let r=this.wheelPendingWidth.get(t);r!==void 0&&(i.kind==="local"?await this.plugin.imageService.updateImageLinkWidth(i.imgFile,r,n):await this.plugin.imageService.updateExternalImageLinkWidth(n,i.url,r),this.setWheelWidthCache(t,r),this.wheelPendingWidth.get(t)===r&&this.wheelPendingWidth.delete(t))}).catch(r=>{T("Wheel resize write failed:",r)}).finally(()=>{this.wheelWriteQueue.get(t)===o&&this.wheelWriteQueue.delete(t);let r=this.wheelMaxWaitTimers.get(t);r&&(clearTimeout(r),this.wheelMaxWaitTimers.delete(t)),this.wheelPendingWidth.has(t)?this.scheduleWheelWidthFlush(t,n,i):this.wheelTargets.delete(t),!this.wheelPendingWidth.has(t)&&!this.wheelDebounceTimers.has(t)&&this.clearWheelInlineWidth(t)});this.wheelWriteQueue.set(t,o)}flushAllPendingWheelWrites(){for(let t of this.wheelPendingWidth.keys()){let e=this.wheelDebounceTimers.get(t);e&&clearTimeout(e),this.wheelDebounceTimers.delete(t);let n=this.wheelMaxWaitTimers.get(t);n&&clearTimeout(n),this.wheelMaxWaitTimers.delete(t),this.flushWheelPendingWidth(t)}}clearWheelInlineWidth(t){let e=this.wheelDomTargets.get(t);e&&(e.dataset.ppiWheelInlineWidth==="true"&&(e.style.removeProperty("width"),delete e.dataset.ppiWheelInlineWidth),this.wheelDomTargets.delete(t))}async handleImageWheel(t,e,n,i){var l;if(!this.plugin.settings.enableWheelZoom)return;let o=this.getWheelWidthCacheKey(n,i),a=t.deltaY,r=((l=this.wheelComputeQueue.get(o))!=null?l:Promise.resolve()).catch(()=>{}).then(async()=>{var x;let u;try{e.naturalWidth>0?u=e.naturalWidth:i.kind==="local"?u=(await this.plugin.imageService.readImageDimensions(i.imgFile)).width:u=500}catch(Pe){return}let m=this.parseWidthFromImageAlt(e),h=this.wheelWidthCache.get(o),g=this.wheelPendingWidth.get(o),c=m!==null?m:(x=g!=null?g:h)!=null?x:i.kind==="local"?this.plugin.imageService.getCurrentImageWidth(n,i.imgFile):this.plugin.imageService.getCurrentExternalImageWidth(n,i.url);m!==null?(this.setWheelWidthCache(o,m),this.wheelPendingWidth.delete(o)):h!==void 0||c!==null&&this.setWheelWidthCache(o,c);let p=c!=null?c:u,f=Math.min(1,Math.abs(a)/10),w=Math.max(1,Math.round(p*(this.plugin.settings.wheelZoomPercentage/100)*f)),E=a<0,D=(this.plugin.settings.invertScrollDirection?!E:E)?p+w:Math.max(1,p-w);D!==p&&(e.style.width=`${D}px`,e.dataset.ppiWheelInlineWidth="true",e.removeAttribute("height"),e.setAttribute("width",String(D)),this.wheelDomTargets.set(o,e),this.setWheelWidthCache(o,D),this.wheelPendingWidth.set(o,D),this.scheduleWheelWidthFlush(o,n,i))});this.wheelComputeQueue.set(o,r);try{await r}finally{this.wheelComputeQueue.get(o)===r&&this.wheelComputeQueue.delete(o)}}handleImageClick(t){if(!(t.metaKey||t.ctrlKey))return;let e=z(t.target);e&&this.plugin.settings.cmdCtrlClickBehavior!=="do-nothing"&&(t.preventDefault(),this.plugin.fileService.getImageFileWithErrorHandling(e).then(n=>{n&&(this.plugin.settings.cmdCtrlClickBehavior==="open-in-new-tab"?this.plugin.app.workspace.openLinkText(n.imgFile.path,"",!0):this.plugin.settings.cmdCtrlClickBehavior==="open-in-default-app"?this.plugin.fileService.openInDefaultApp(n.imgFile):this.plugin.settings.cmdCtrlClickBehavior==="open-in-external-editor"&&this.plugin.fileService.openInExternalEditor(n.imgFile.path))}).catch(n=>{let i=s.actions.performAction;if(this.plugin.settings.cmdCtrlClickBehavior==="open-in-new-tab")i=s.actions.openInNewTab;else if(this.plugin.settings.cmdCtrlClickBehavior==="open-in-default-app")i=s.actions.openInDefaultApp;else if(this.plugin.settings.cmdCtrlClickBehavior==="open-in-external-editor"){let o=this.plugin.settings.externalEditorName.trim()||"external editor";i=s.actions.openInEditor.replace("{editor}",o)}T(`Failed to ${i}:`,n),new H.Notice(s.notices.failedToPerformAction.replace("{action}",i))}))}registerEvents(){this.plugin.registerDomEvent(document,"click",t=>this.handleImageClick(t)),this.plugin.registerEvent(this.plugin.app.workspace.on("layout-change",()=>this.registerWheelEvents(window))),this.registerWheelEvents(window)}cleanup(){this.isModifierKeyHeld=!1,this.flushAllPendingWheelWrites(),this.wheelWidthCache.clear(),this.wheelPendingWidth.clear();for(let t of this.wheelDebounceTimers.values())clearTimeout(t);for(let t of this.wheelMaxWaitTimers.values())clearTimeout(t);this.wheelDebounceTimers.clear(),this.wheelMaxWaitTimers.clear(),this.wheelTargets.clear();for(let t of this.wheelDomTargets.keys())this.clearWheelInlineWidth(t);this.wheelComputeQueue.clear(),this.wheelWriteQueue.clear(),this.wheelEventCleanup&&(this.wheelEventCleanup(),this.wheelEventCleanup=null)}};R.WHEEL_WIDTH_CACHE_MAX_ENTRIES=300,R.WHEEL_WRITE_DEBOUNCE_MS=250,R.WHEEL_WRITE_MAX_WAIT_MS=2e3;var J=R;var v=require("obsidian");var je=require("path");A();var ee=class{constructor(t){this.plugin=t}getRemoteImageUrlForLinkMatching(t){return Q(t)}getRasterNaturalDimensions(t){let e=t.naturalWidth,n=t.naturalHeight;return e>0&&n>0?{width:e,height:n}:null}isSvgUrl(t){let e=t.trim().toLowerCase();if(!e)return!1;if(e.startsWith("data:image/svg+xml")||e.includes("image/svg+xml"))return!0;try{return new URL(t).pathname.toLowerCase().endsWith(".svg")}catch(n){return e.split(/[?#]/,1)[0].endsWith(".svg")}}isSvgBySrc(t){return X(t).some(e=>this.isSvgUrl(e))}parseWidthFromImageAlt(t){var i,o,a;let e=(i=t.getAttribute("alt"))!=null?i:"";if(!e)return null;let n=e.split("|").map(r=>r.trim()).filter(Boolean);return(a=(o=C(n))==null?void 0:o.width)!=null?a:null}async addRemoteResizeMenuItems(t,e,n,i){var u,m,h;let o=this.isSvgBySrc(e),a=(u=this.parseWidthFromImageAlt(e))!=null?u:this.plugin.imageService.getCurrentExternalImageWidth(n,i),r=null;o||(r=(h=(m=this.getRasterNaturalDimensions(e))==null?void 0:m.width)!=null?h:null);let l=a!==null&&r!==null?Math.round(a/r*100):null;this.plugin.settings.customResizeSizes.length>0&&this.plugin.settings.customResizeSizes.forEach(g=>{let c=K(g);if(!c)return;let p=c.amount,f=c.unit,w=s.menu.resizeTo.replace("{size}",g),E=f==="%",y=E?o&&r===null?!0:l===p:a===p,D="image";E?D=p===100?"image":"percent":D="ruler",this.addMenuItem(t,w,D,()=>this.plugin.imageService.resizeExternalImage(n,i,e,p,!E),s.notices.failedToResizeTo.replace("{size}",g),y)}),a!==null&&this.addMenuItem(t,s.menu.removeCustomSize,"reset",async()=>{await this.plugin.imageService.removeExternalImageWidth(n,i),new v.Notice(s.notices.customSizeRemoved)},s.notices.failedToRemoveSize)}registerImageContextMenu(){this.plugin.registerDomEvent(document,"contextmenu",this.handleContextMenu.bind(this),!0);let t=null;this.plugin.registerDomEvent(document,"touchstart",e=>{e.touches.length>1||!z(e.target)||(t=setTimeout(()=>{this.handleContextMenu(e)},500))},!0),this.plugin.registerDomEvent(document,"touchend",()=>{t&&clearTimeout(t),t=null},!0),this.plugin.registerDomEvent(document,"touchmove",()=>{t&&clearTimeout(t),t=null},!0)}async handleContextMenu(t){var r,l;if("touches"in t&&t.touches.length>1)return;let e=z(t.target);if(!e)return;let n=(r=Ke(this.plugin.app,e))!=null?r:this.plugin.app.workspace.getActiveViewOfType(v.MarkdownView);if(!n)return;t.preventDefault();let i=new v.Menu;if(Y(e)){let u=n.file;if(!u)return;let m=this.getRemoteImageUrlForLinkMatching(e);this.addInfoMenuItem(i,s.menu.remoteImage,"globe"),this.isSvgBySrc(e)||this.addCopyImageMenuItem(i,e),this.addMenuItem(i,s.menu.copyImageUrl,"link",async()=>{let h=this.getRemoteImageUrlForLinkMatching(e);await navigator.clipboard.writeText(h),new v.Notice(s.notices.imageUrlCopied)},s.notices.failedToCopyUrl),i.addSeparator(),await this.addRemoteResizeMenuItems(i,e,u,m)}else{let u=n.file,m=u?await this.plugin.fileService.getImageFileWithErrorHandling(e,!0,u):await this.plugin.fileService.getImageFileWithErrorHandling(e),h=m?this.plugin.imageService.getCurrentImageWidth(m.activeFile,m.imgFile):null;await this.addDimensionsMenuItem(i,e,m,h),await this.addResizeMenuItems(i,e,m,h),v.Platform.isMobile||(i.addSeparator(),this.addFileOperationMenuItems(i,(l=m==null?void 0:m.imgFile)!=null?l:null))}let a={x:t instanceof MouseEvent?t.pageX:t.touches[0].pageX,y:t instanceof MouseEvent?t.pageY:t.touches[0].pageY};i.showAtPosition(a)}addInfoMenuItem(t,e,n){t.addItem(i=>{i.setTitle(e).setIcon(n).setDisabled(!0)})}async addDimensionsMenuItem(t,e,n,i){if(this.plugin.settings.showFileInfo)try{let o=n!==void 0?n:await this.plugin.fileService.getImageFileWithErrorHandling(e);if(!o)return;let a=o.imgFile.extension.toLowerCase()==="svg"||this.isSvgBySrc(e),r,l,u=a?null:this.getRasterNaturalDimensions(e);u?{width:r,height:l}=u:{width:r,height:l}=await this.plugin.imageService.readImageDimensions(o.imgFile);let m=i!==void 0?i:this.plugin.imageService.getCurrentImageWidth(o.activeFile,o.imgFile),h=m!==null?Math.round(m/r*100):null,g=h!==null?` @ ${h}%`:"";this.addInfoMenuItem(t,`${o.imgFile.name}${g}`,"image-file"),this.addInfoMenuItem(t,`${r} \xD7 ${l} px`,"info")}catch(o){T("Could not read dimensions:",o);let a=F(o)?o.message:s.notices.couldNotReadDimensions;new v.Notice(a)}}createMenuClickHandler(t,e){return async()=>{try{await t()}catch(n){T(e,n);let i=F(n)?n.message:e;new v.Notice(i)}}}addMenuItem(t,e,n,i,o,a=!1){t.addItem(r=>{r.setTitle(e).setIcon(n).setDisabled(a).onClick(this.createMenuClickHandler(i,o))})}addCopyImageMenuItem(t,e){this.addMenuItem(t,s.menu.copyImage,"copy",async()=>{await this.plugin.imageService.copyImageToClipboard(e),new v.Notice(s.notices.imageCopied)},s.notices.failedToCopyImage)}async addResizeMenuItems(t,e,n,i){var h,g;let o=n!==void 0?n:await this.plugin.fileService.getImageFileWithErrorHandling(e),a=null,r=i!==void 0?i:o?this.plugin.imageService.getCurrentImageWidth(o.activeFile,o.imgFile):null,l=null;if(!o){this.isSvgBySrc(e)||this.addCopyImageMenuItem(t,e);return}let{imgFile:u}=o,m=u.extension.toLowerCase()==="svg"||this.isSvgBySrc(e);if(m||(this.addCopyImageMenuItem(t,e),t.addSeparator()),this.addMenuItem(t,s.menu.copyLocalPath,"link",async()=>{let c=this.plugin.app.vault.adapter;if(!(c instanceof v.FileSystemAdapter)){new v.Notice(s.notices.cannotCopyPath);return}let p=c.getBasePath(),f=(0,je.join)(p,(0,v.normalizePath)(u.path));await navigator.clipboard.writeText(f),new v.Notice(s.notices.filePathCopied)},s.notices.failedToCopyPath),t.addSeparator(),m||(l=(g=(h=this.getRasterNaturalDimensions(e))==null?void 0:h.width)!=null?g:null),l===null)try{let{width:c}=await this.plugin.imageService.readImageDimensions(u);l=c}catch(c){l=null}a=r!==null&&l!==null?Math.round(r/l*100):null,this.plugin.settings.customResizeSizes.length>0&&this.plugin.settings.customResizeSizes.forEach(c=>{let p=K(c);if(!p)return;let f=p.amount,w=p.unit,E=s.menu.resizeTo.replace("{size}",c),y=w==="%",D=y?m&&l===null?!0:a===f:r===f,x="image";y?f===100?x="image":x="percent":x="ruler",this.addMenuItem(t,E,x,()=>this.plugin.imageService.resizeImage(e,f,!y,o.activeFile),s.notices.failedToResizeTo.replace("{size}",c),D)}),r!==null&&this.addMenuItem(t,s.menu.removeCustomSize,"reset",async()=>{await this.plugin.imageService.removeImageWidth(u,o.activeFile),new v.Notice(s.notices.customSizeRemoved)},s.notices.failedToRemoveSize)}addFileOperationMenuItems(t,e){if(v.Platform.isMobile||!e)return;let n=v.Platform.isMacOS,i=j(this.plugin.settings),o=!!(i!=null&&i.trim()),a=this.plugin.settings.showOpenInNewTab||this.plugin.settings.showOpenToTheRight||this.plugin.settings.showOpenInNewWindow;if(this.plugin.settings.showOpenInNewTab&&this.addMenuItem(t,s.menu.openInNewTab,"lucide-file-plus",async()=>{await this.plugin.app.workspace.openLinkText(e.path,"",!0)},s.notices.failedToOpenInNewTab),this.plugin.settings.showOpenToTheRight&&this.addMenuItem(t,s.menu.openToTheRight,"lucide-separator-vertical",async()=>{let r=this.plugin.app.workspace.getLeaf("split","vertical");await r.openFile(e),this.plugin.app.workspace.setActiveLeaf(r)},s.notices.failedToOpenToTheRight),this.plugin.settings.showOpenInNewWindow&&this.addMenuItem(t,s.menu.openInNewWindow,"lucide-app-window",async()=>{let r=this.plugin.app.workspace.getLeaf("window");await r.openFile(e),this.plugin.app.workspace.setActiveLeaf(r)},s.notices.failedToOpenInNewWindow),a&&(this.plugin.settings.showOpenInDefaultApp||o)&&t.addSeparator(),this.plugin.settings.showOpenInDefaultApp&&this.addMenuItem(t,s.menu.openInDefaultApp,"image",async()=>{await this.plugin.fileService.openInDefaultApp(e)},s.notices.failedToOpenInDefaultApp),o){let r=this.plugin.settings.externalEditorName.trim()||"external editor";this.addMenuItem(t,s.menu.openInEditor.replace("{editor}",r),"edit",async()=>{await this.plugin.fileService.openInExternalEditor(e.path)},s.notices.failedToOpenInEditor.replace("{editor}",r))}(this.plugin.settings.showShowInFileExplorer||this.plugin.settings.showRenameOption||this.plugin.settings.showDeleteImageOption)&&t.addSeparator(),this.plugin.settings.showShowInFileExplorer&&this.addMenuItem(t,n?s.menu.showInFinder:s.menu.showInExplorer,n?"lucide-app-window-mac":"lucide-app-window",async()=>{await this.plugin.fileService.showInSystemExplorer(e)},s.notices.failedToOpenExplorer),this.plugin.settings.showRenameOption&&this.addMenuItem(t,s.menu.renameImage,"pencil",async()=>{await this.plugin.fileService.renameImage(e)},s.notices.failedToRenameImage),this.plugin.settings.showDeleteImageOption&&this.addMenuItem(t,s.menu.deleteImageAndLink,"lucide-trash",async()=>{await this.plugin.fileService.deleteImageAndLink(e)},s.notices.failedToDeleteImage)}};var _=require("obsidian");A();var P=class P{constructor(t){this.dimensionCache=new Map;this.externalImageFetchInFlight=new Map;this.plugin=t}async withTimeout(t,e,n){let i=null,o=new Promise((a,r)=>{i=setTimeout(()=>r(S(n)),e)});try{return await Promise.race([t,o])}finally{i&&clearTimeout(i)}}getClipboardImageSrc(t){let e=Q(t);return O(e)?e:t.currentSrc||t.src||e}assertCopySizeOk(t,e){if(t<=0||e<=0)throw S(s.notices.couldNotDetermineImageDimensions);if(t>P.CLIPBOARD_COPY_MAX_DIMENSION||e>P.CLIPBOARD_COPY_MAX_DIMENSION)throw S(s.notices.imageTooLargeToCopy);if(t*e>P.CLIPBOARD_COPY_MAX_PIXELS)throw S(s.notices.imageTooLargeToCopy)}async canvasToClipboard(t,e,n){this.assertCopySizeOk(e,n);let i=document.createElement("canvas");i.width=e,i.height=n;let o=i.getContext("2d");if(!o)throw new Error("Failed to get canvas context");o.drawImage(t,0,0,e,n);let a=await new Promise(l=>{i.toBlob(l,"image/png")});if(!a)throw new Error("Failed to create blob");if(a.size>P.CLIPBOARD_COPY_MAX_BYTES)throw S(s.notices.imageTooLargeToCopy);let r=new ClipboardItem({[a.type]:a});await navigator.clipboard.write([r])}parseContentLength(t){var i,o;let e=(o=(i=t==null?void 0:t["content-length"])!=null?i:t==null?void 0:t["Content-Length"])!=null?o:t==null?void 0:t["CONTENT-LENGTH"];if(!e)return null;let n=Number(e);return!Number.isFinite(n)||n<=0?null:n}parseContentType(t){var i,o,a;let e=(o=(i=t==null?void 0:t["content-type"])!=null?i:t==null?void 0:t["Content-Type"])!=null?o:t==null?void 0:t["CONTENT-TYPE"];return((a=e==null?void 0:e.split(";",1)[0])==null?void 0:a.trim())||null}parseContentRangeTotal(t){var o,a;let e=(a=(o=t==null?void 0:t["content-range"])!=null?o:t==null?void 0:t["Content-Range"])!=null?a:t==null?void 0:t["CONTENT-RANGE"];if(!e)return null;let n=e.match(/\/(\d+|\*)\s*$/);if(!n||n[1]==="*")return null;let i=Number(n[1]);return!Number.isFinite(i)||i<=0?null:i}sniffImageMimeType(t){let e=new Uint8Array(t.slice(0,256));if(e.length>=8&&e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10)return"image/png";if(e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255)return"image/jpeg";if(e.length>=6&&e[0]===71&&e[1]===73&&e[2]===70&&e[3]===56&&(e[4]===55||e[4]===57)&&e[5]===97)return"image/gif";if(e.length>=12&&e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===69&&e[10]===66&&e[11]===80)return"image/webp";if(e.length>=2&&e[0]===66&&e[1]===77)return"image/bmp";if(e.length>=4&&e[0]===0&&e[1]===0&&e[2]===1&&e[3]===0)return"image/x-icon";if(e.length>=12&&e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112){let n=String.fromCharCode(e[8],e[9],e[10],e[11]);if(n==="avif"||n==="avis")return"image/avif"}try{if(new TextDecoder("utf-8").decode(e).trimStart().toLowerCase().includes("<svg"))return"image/svg+xml"}catch(n){}return null}looksLikeHtml(t){let e=new Uint8Array(t.slice(0,512));try{let i=new TextDecoder("utf-8").decode(e).trimStart().toLowerCase();return i.startsWith("<!doctype html")||i.startsWith("<html")||i.includes("<html")}catch(n){return!1}}getExternalImageBlobPromise(t){let e=this.externalImageFetchInFlight.get(t);if(e)return e;let n=(async()=>{var f;$e(t)&&new _.Notice(s.notices.fetchingLocalNetworkImage);let i={Accept:"image/*"},o=null;try{let w=await(0,_.requestUrl)({url:t,method:"GET",throw:!1,headers:{...i,Range:"bytes=0-0"}});if(w.status===200)o={arrayBuffer:w.arrayBuffer,headers:w.headers,status:w.status};else if(w.status===206){let E=this.parseContentRangeTotal(w.headers);if(E!==null&&E>P.CLIPBOARD_COPY_MAX_BYTES)throw S(s.notices.imageTooLargeToCopy)}}catch(w){if(F(w)&&w.message===s.notices.imageTooLargeToCopy)throw w}let a=o||await(0,_.requestUrl)({url:t,method:"GET",throw:!1,headers:i});if(a.status<200||a.status>=300)throw S(s.notices.failedToFetchExternalImage.replace("{status}",String(a.status)));let r=this.parseContentLength(a.headers);if(r!==null&&r>P.CLIPBOARD_COPY_MAX_BYTES)throw S(s.notices.imageTooLargeToCopy);let l=a.arrayBuffer;if(!(l instanceof ArrayBuffer)||l.byteLength<=0)throw S(s.notices.failedToFetchExternalImage.replace("{status}",String(a.status)));if(l.byteLength>P.CLIPBOARD_COPY_MAX_BYTES)throw S(s.notices.imageTooLargeToCopy);let m=this.sniffImageMimeType(l),h=this.parseContentType(a.headers),g=h==null?void 0:h.toLowerCase(),c=(f=g==null?void 0:g.startsWith("image/"))!=null?f:!1;if(!m&&(g==="text/html"||g==="application/xhtml+xml"||this.looksLikeHtml(l)))throw S(s.notices.externalImageNotImage);let p=c?g:m!=null?m:"";return p?new Blob([l],{type:p}):new Blob([l])})();return this.externalImageFetchInFlight.set(t,n),n.finally(()=>this.externalImageFetchInFlight.delete(t)),n}async fetchExternalImageAsObjectUrl(t){let e=await this.withTimeout(this.getExternalImageBlobPromise(t),P.CLIPBOARD_COPY_REQUEST_TIMEOUT_MS,s.notices.externalImageFetchTimedOut),n=URL.createObjectURL(e);return{objectUrl:n,revoke:()=>URL.revokeObjectURL(n)}}setDimensionCache(t,e){if(this.dimensionCache.set(t,e),this.dimensionCache.size<=P.DIMENSION_CACHE_MAX_ENTRIES)return;let n=this.dimensionCache.keys().next().value;n&&this.dimensionCache.delete(n)}decodeText(t){let e=new Uint8Array(t);if(e.length>=2){if(e[0]===255&&e[1]===254)return new TextDecoder("utf-16le").decode(e);if(e[0]===254&&e[1]===255){let i=new Uint8Array(e.length);i.set(e);for(let o=0;o+1<i.length;o+=2){let a=i[o];i[o]=i[o+1],i[o+1]=a}return new TextDecoder("utf-16le").decode(i)}}if(e.length>=3&&e[0]===239&&e[1]===187&&e[2]===191)return new TextDecoder("utf-8").decode(e);let n=new TextDecoder("utf-8").decode(e);if(n.slice(0,200).includes("\0"))try{return new TextDecoder("utf-16le").decode(e)}catch(i){}return n}getMimeTypeForExtension(t){switch(t.toLowerCase()){case"png":return"image/png";case"jpg":case"jpeg":return"image/jpeg";case"gif":return"image/gif";case"webp":return"image/webp";case"avif":return"image/avif";case"bmp":return"image/bmp";case"tif":case"tiff":return"image/tiff";case"svg":return"image/svg+xml";default:return"image/*"}}parseSvgLengthToPx(t){if(!t)return null;let e=t.trim();if(!e)return null;let n=e.match(/^([+-]?(?:\d+|\d*\.\d+))\s*([a-z%]*)$/i);if(!n)return null;let i=Number(n[1]);if(!Number.isFinite(i))return null;let o=(n[2]||"").toLowerCase();if(o===""||o==="px")return i;switch(o){case"in":return i*96;case"cm":return i*96/2.54;case"mm":return i*96/25.4;case"pt":return i*96/72;case"pc":return i*16;case"q":return i*96/101.6;default:return null}}readSvgDimensionsFromBinary(t){var e,n,i,o,a,r,l,u,m,h,g,c,p,f,w,E;try{let y=this.decodeText(t),x=new DOMParser().parseFromString(y,"image/svg+xml").querySelector("svg"),Pe=(e=x==null?void 0:x.getAttribute("width"))!=null?e:null,Ye=(n=x==null?void 0:x.getAttribute("height"))!=null?n:null,le=(o=(i=x==null?void 0:x.getAttribute("viewBox"))!=null?i:x==null?void 0:x.getAttribute("viewbox"))!=null?o:null,V=(r=(a=y.match(/<svg\b[^>]*>/i))==null?void 0:a[0])!=null?r:"",qe=(u=(l=V.match(/\bwidth\s*=\s*["']([^"']+)["']/i))==null?void 0:l[1])!=null?u:null,Je=(h=(m=V.match(/\bheight\s*=\s*["']([^"']+)["']/i))==null?void 0:m[1])!=null?h:null,et=(f=(p=(g=V.match(/\bviewBox\s*=\s*["']([^"']+)["']/i))==null?void 0:g[1])!=null?p:(c=V.match(/\bviewbox\s*=\s*["']([^"']+)["']/i))==null?void 0:c[1])!=null?f:null,de=(w=this.parseSvgLengthToPx(Pe))!=null?w:this.parseSvgLengthToPx(qe),ce=(E=this.parseSvgLengthToPx(Ye))!=null?E:this.parseSvgLengthToPx(Je),ye=le!=null?le:et,N=de!==null&&de>0?de:null,L=ce!==null&&ce>0?ce:null;if(N!==null&&L!==null)return{width:Math.round(N),height:Math.round(L)};if(ye){let G=ye.trim().split(/[\s,]+/).map(W=>Number(W));if(G.length>=4&&G.every(W=>Number.isFinite(W))){let W=G[2],me=G[3];if(W>0&&me>0){if(N===null&&L===null)return{width:300,height:150};if(N!==null&&L===null)return{width:Math.round(N),height:Math.round(N*me/W)};if(N===null&&L!==null)return{width:Math.round(L*W/me),height:Math.round(L)}}}}return N===null&&L===null?{width:300,height:150}:N!==null&&L===null?{width:Math.round(N),height:150}:N===null&&L!==null?{width:300,height:Math.round(L)}:{width:300,height:150}}catch(y){return null}}clearDimensionCache(){this.dimensionCache.clear()}async resizeImage(t,e,n=!1,i){let o=await this.plugin.fileService.getImageFileWithErrorHandling(t,!1,i);if(!o)throw S(s.notices.couldNotLocateImage);if(n){await this.updateImageLinkWidth(o.imgFile,e,o.activeFile);return}let{width:a}=await this.readImageDimensions(o.imgFile),r=Math.round(a*e/100);await this.updateImageLinkWidth(o.imgFile,r,o.activeFile)}async updateImageLinkWidth(t,e,n){let i=n!=null?n:this.plugin.app.workspace.getActiveFile();if(!i)throw new Error("No active file, cannot update link.");await this.plugin.linkService.updateImageLinks(i,t,o=>{let a=C(o);if(a){let r=String(e);return[...o.slice(0,a.index),r,...o.slice(a.index+1)]}return[...o,String(e)]})}async updateExternalImageLinkWidth(t,e,n){await this.plugin.linkService.updateExternalImageLinks(t,e,i=>{let o=C(i);if(o){let a=String(n);return[...i.slice(0,o.index),a,...i.slice(o.index+1)]}return[...i,String(n)]})}async removeImageWidth(t,e){let n=e!=null?e:this.plugin.app.workspace.getActiveFile();if(!n)throw new Error("No active file, cannot update link.");await this.plugin.linkService.updateImageLinks(n,t,i=>{let o=C(i);return o?[...i.slice(0,o.index),...i.slice(o.index+1)]:i})}async removeExternalImageWidth(t,e){await this.plugin.linkService.updateExternalImageLinks(t,e,n=>{let i=C(n);return i?[...n.slice(0,i.index),...n.slice(i.index+1)]:n})}async readImageDimensions(t){let e=this.dimensionCache.get(t.path);if(e)return e;let n=await this.plugin.app.vault.readBinary(t),i=t.extension.toLowerCase()==="svg",o=i?this.readSvgDimensionsFromBinary(n):null;if(i&&o)return this.setDimensionCache(t.path,o),o;let a=this.createBlob(n,this.getMimeTypeForExtension(t.extension)),r=URL.createObjectURL(a);try{let l=await this.loadImage(r),u=l.naturalWidth||l.width,m=l.naturalHeight||l.height,h={width:u,height:m};if(!(Number.isFinite(h.width)&&Number.isFinite(h.height)&&h.width>0&&h.height>0))throw i?S(s.notices.couldNotDetermineSvgDimensions):S(s.notices.couldNotDetermineImageDimensions);return this.setDimensionCache(t.path,h),h}catch(l){throw i&&!F(l)?S(s.notices.couldNotDetermineSvgDimensions):l}finally{URL.revokeObjectURL(r)}}getCurrentImageWidth(t,e){let n=be(this.plugin.app,t);if(!n)return null;let i=n.getValue();return this.plugin.linkService.findCurrentImageWidthInText(t,e,i)}getCurrentExternalImageWidth(t,e){let n=be(this.plugin.app,t);if(!n)return null;let i=n.getValue();return this.plugin.linkService.findCurrentExternalImageWidthInText(e,i)}async resizeExternalImage(t,e,n,i,o=!1){if(o){await this.updateExternalImageLinkWidth(t,e,i);return}let a=n.naturalWidth>0?n.naturalWidth:500,r=Math.round(a*i/100);await this.updateExternalImageLinkWidth(t,e,r)}loadImage(t,e){return new Promise((n,i)=>{let o=new Image;e&&(o.crossOrigin=e),o.onload=()=>n(o),o.onerror=()=>i(new Error("Failed to load image")),o.src=t})}createBlob(t,e){return new Blob([new Uint8Array(t)],{type:e})}async copyImageToClipboard(t){try{let e=this.getClipboardImageSrc(t);if(!e)throw new Error("No image source found");try{let i=t.naturalWidth||t.width,o=t.naturalHeight||t.height;await this.canvasToClipboard(t,i,o);return}catch(i){if(F(i))throw i}if(O(e)){let{objectUrl:i,revoke:o}=await this.fetchExternalImageAsObjectUrl(e);try{let a=await this.loadImage(i);await this.canvasToClipboard(a,a.naturalWidth||a.width,a.naturalHeight||a.height)}finally{o()}return}let n=await this.loadImage(e,"anonymous");await this.canvasToClipboard(n,n.naturalWidth||n.width,n.naturalHeight||n.height)}catch(e){throw T("Copy to clipboard failed:",e),e instanceof Error&&e.message.includes("Document is not focused")?S(s.notices.clickInEditorFirst):e}}};P.DIMENSION_CACHE_MAX_ENTRIES=300,P.CLIPBOARD_COPY_MAX_BYTES=25*1024*1024,P.CLIPBOARD_COPY_MAX_PIXELS=4e7,P.CLIPBOARD_COPY_MAX_DIMENSION=12e3,P.CLIPBOARD_COPY_REQUEST_TIMEOUT_MS=15e3;var te=P;var ne=class{constructor(t){this.plugin=t}scanMarkdownImageLinks(t,e){let n=0,i=t.length;for(;n<i;){let o=t.indexOf("![",n);if(o===-1)break;let a=o+2,r=-1;for(;a<i;){let w=t[a];if(w==="\\"){a+=2;continue}if(w==="]"){r=a;break}a+=1}if(r===-1||t[r+1]!=="("){n=o+1;continue}let l=t.substring(o+2,r),u=r+1,m=0,h=-1;for(a=u;a<i;){let w=t[a];if(w==="\\"){a+=2;continue}if(w==="("&&(m+=1),w===")"&&(m-=1,m===0)){h=a;break}a+=1}if(h===-1)break;let g=t.substring(u+1,h),{url:c,titleSuffix:p}=this.splitMarkdownLinkDestination(g),f=t.substring(o,h+1);e({start:o,end:h+1,fullMatch:f,description:l,linkPath:c,titleSuffix:p,rawDestination:g}),n=h+1}}splitMarkdownLinkDestination(t){let e=t,n=0;for(;n<e.length&&/\s/.test(e[n]);)n+=1;if(n>=e.length)return{url:"",titleSuffix:""};if(e[n]==="<"){let r=n+1;for(;r<e.length;){let l=e[r];if(l==="\\"){r+=2;continue}if(l===">")break;r+=1}if(r<e.length&&e[r]===">"){let l=e.substring(n+1,r).trim(),u=e.substring(r+1);return{url:l,titleSuffix:u}}}let i=n;for(;n<e.length;){let r=e[n];if(r==="\\"){n+=2;continue}if(/\s/.test(r))break;n+=1}let o=e.substring(i,n).trim(),a=e.substring(n);return{url:o,titleSuffix:a}}encodeMarkdownPathSegment(t){return encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)}replaceMarkdownImageLinks(t,e){let n="",i=0;return this.scanMarkdownImageLinks(t,({start:o,end:a,fullMatch:r,description:l,linkPath:u,titleSuffix:m,rawDestination:h})=>{n+=t.substring(i,o),n+=e(r,l,u,m,h),i=a}),n+=t.substring(i),n}splitFrontmatter(t){let e=t.match(/^---\r?\n[\s\S]*?\r?\n---(?:\r?\n|$)/);if(!e)return{frontmatter:"",content:t};let n=e[0];return{frontmatter:n,content:t.substring(n.length)}}updateLinks(t,e,n,i){return t=t.replace(q,(o,a)=>{let r=this.parseLinkComponents(a);return this.resolveLink(r.path,e,n)?(r.params=i(r.params),`![[${this.buildLinkPath(r)}]]`):o}),this.replaceMarkdownImageLinks(t,(o,a,r,l)=>{let u=this.parseLinkComponents(a,r);if(!this.resolveLink(u.path,e,n))return o;let h=a.split("|")[0].trim()||n.basename;u.params=i(u.params);let g=u.params.length>0?[h,...u.params].join("|"):h,c=`${this.buildLinkPath({...u,params:[]},!0)}${l}`;return`![${g}](${c})`})}normalizeUrlForComparison(t){let e=t.trim();if(!e)return"";try{return new URL(e).href}catch(n){return e}}isSameExternalUrl(t,e){return this.normalizeUrlForComparison(t)===this.normalizeUrlForComparison(e)}updateExternalLinks(t,e,n){return this.replaceMarkdownImageLinks(t,(i,o,a,r,l)=>{if(!this.isSameExternalUrl(a,e))return i;let[u,...m]=o.split("|"),h=u.trim(),g=n(m);return`![${g.length>0?[h,...g].join("|"):h}](${l})`})}parseLinkComponents(t,e){if(e){let[l,u]=e.split("#",2),m=u?`#${u}`:"",h=U(l),[,...g]=t.split("|");return{path:h,hash:m,params:g,isWikiStyle:!1}}let[n,...i]=t.split("|"),o=n,a="",r=n.indexOf("#");if(r>=0)o=n.substring(0,r),a=n.substring(r);else if(i.length>0){let l=i[i.length-1],u=l.indexOf("#");if(u>=0){let m=l.substring(0,u),h=l.substring(u);/^[1-9]\d*(?:x[1-9]\d*)?(?:px)?$/i.test(m)&&(i[i.length-1]=m,a=h)}}return{path:o,hash:a,params:i,isWikiStyle:!0}}buildLinkPath(t,e=!1){let n=t.params.length>0?`|${t.params.join("|")}`:"",i=t.path;return e&&(i=t.path.split("/").map(o=>this.encodeMarkdownPathSegment(o)).join("/")),`${i}${n}${t.hash}`}async updateImageLinks(t,e,n){if(t.path===e.path)return!1;let i=!1;try{await this.plugin.app.vault.process(t,o=>{let{frontmatter:a,content:r}=this.splitFrontmatter(o),l=this.updateLinks(r,t,e,n);return l===r?o:(i=!0,a?`${a}${l}`:l)})}catch(o){throw T("Failed to update file content:",o),new Error("Failed to update image link")}return i}async updateExternalImageLinks(t,e,n){let i=!1;try{await this.plugin.app.vault.process(t,o=>{let{frontmatter:a,content:r}=this.splitFrontmatter(o),l=this.updateExternalLinks(r,e,n);return l===r?o:(i=!0,a?`${a}${l}`:l)})}catch(o){throw T("Failed to update external image link:",o),new Error("Failed to update external image link")}return i}resolveLink(t,e,n){let i=this.plugin.app.metadataCache.getFirstLinkpathDest(t,e.path);return!i||n&&i.path!==n.path?null:i}findCurrentImageWidthInText(t,e,n){for(let o of n.matchAll(q)){let[,a]=o,r=this.parseLinkComponents(a);if(!this.resolveLink(r.path,t,e))continue;let l=C(r.params);if(l)return l.width}let i=null;return this.scanMarkdownImageLinks(n,({description:o,linkPath:a})=>{if(i!==null)return;let r=this.parseLinkComponents(o,a);if(!this.resolveLink(r.path,t,e))return;let l=C(r.params);l&&(i=l.width)}),i}findCurrentExternalImageWidthInText(t,e){let n=null;return this.scanMarkdownImageLinks(e,({description:i,linkPath:o})=>{if(n!==null||!this.isSameExternalUrl(o,t))return;let[,...a]=i.split("|"),r=C(a);r&&(n=r.width)}),n}async removeImageLinks(t){let e=this.plugin.app.workspace.getActiveFile();if(!e)throw new Error("No active file, cannot remove links.");if(e.path===t.path)return!1;let n=!1;try{await this.plugin.app.vault.process(e,i=>{let{frontmatter:o,content:a}=this.splitFrontmatter(i),r=a;return r=r.replace(q,(l,u)=>{let m=this.parseLinkComponents(u);return this.resolveLink(m.path,e,t)?"":l}),r=this.replaceMarkdownImageLinks(r,(l,u,m)=>{let h=this.parseLinkComponents(u,m);return this.resolveLink(h.path,e,t)?"":l}),r===a?i:(n=!0,o?`${o}${r}`:r)})}catch(i){throw T("Failed to remove image links:",i),new Error("Failed to remove image links")}return n}};var b=require("obsidian"),Xe=require("path"),ae=require("child_process");var Se=require("obsidian");A();var ie=class extends Se.Modal{constructor(e,n,i){super(e);this.result=null;this.originalName=n,this.onSubmit=i}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("pixel-perfect-rename-modal"),e.createEl("h2",{text:s.modals.rename.title,cls:"modal-title"});let n=e.createEl("form");n.addClass("pixel-perfect-rename-form");let i=n.createEl("input",{type:"text",value:this.originalName,cls:"pixel-perfect-rename-input"}),o=this.originalName.lastIndexOf(".");if(o>0){let l=this.originalName.substring(0,o);i.setSelectionRange(0,l.length)}let a=n.createDiv();a.addClass("pixel-perfect-button-container"),a.createEl("button",{text:s.modals.rename.renameButton,type:"submit",cls:"mod-cta"}),a.createEl("button",{text:s.modals.rename.cancelButton,type:"button"}).addEventListener("click",()=>{this.onSubmit(null),this.close()}),n.addEventListener("submit",l=>{l.preventDefault();let u=i.value.trim();u&&u!==this.originalName?this.onSubmit(u):this.onSubmit(null),this.close()}),i.focus()}onClose(){let{contentEl:e}=this;e.empty(),this.result===void 0&&this.onSubmit(null)}},oe=class extends Se.Modal{constructor(t,e,n){super(t),this.file=e,this.onConfirm=n}onOpen(){let{contentEl:t}=this;t.empty(),t.addClass("pixel-perfect-delete-modal"),t.createEl("h2",{text:s.modals.delete.title,cls:"modal-title"});let e=t.createDiv();e.addClass("pixel-perfect-delete-message"),e.createEl("p",{text:s.modals.delete.confirmMessage.replace("{filename}",this.file.name)}),e.createEl("p",{text:s.modals.delete.warningMessage,cls:"mod-warning"});let n=t.createDiv();n.addClass("pixel-perfect-button-container");let i=n.createEl("button",{text:s.modals.delete.deleteButton,cls:"mod-warning"}),o=n.createEl("button",{text:s.modals.delete.cancelButton});i.addEventListener("click",()=>{this.onConfirm(),this.close()}),o.addEventListener("click",()=>{this.close()}),o.focus()}onClose(){let{contentEl:t}=this;t.empty()}};A();var re=class{constructor(t){this.plugin=t}getFileForImage(t,e){var a;let n=(a=t.getAttribute("src"))!=null?a:"",i=t.getAttribute("alt"),o=this.parseFileNameFromSrc(n);if(o){let r=this.plugin.linkService.resolveLink(o,e);if(r)return r}if(i){i=i.split("|")[0].trim();let r=this.plugin.linkService.resolveLink(i,e);if(r)return r}return null}parseFileNameFromSrc(t){let e=t.trim();if(!e)return null;let[n]=e.split(/[?#]/,1);if(!n)return null;try{let o=new URL(n).pathname.split("/").filter(Boolean).pop();return o?U(o):null}catch(i){let o=U(n);if(!(o.startsWith("/")||/^[a-zA-Z]:[\\/]/.test(o))&&o.includes("/"))return o;let r=o.lastIndexOf("/");return(r>=0?o.substring(r+1):o)||null}}async getImageFileWithErrorHandling(t,e=!0,n){let i=n!=null?n:this.plugin.app.workspace.getActiveFile();if(!i)return null;let o=this.getFileForImage(t,i);return o?{activeFile:i,imgFile:o}:(e&&(t.naturalWidth>0||t.src)&&new b.Notice(s.notices.couldNotLocateImage),null)}async showInSystemExplorer(t){this.plugin.app.showInFolder(t.path)}async openInDefaultApp(t){this.plugin.app.openWithDefaultApp(t.path)}openInExternalEditor(t){let e=j(this.plugin.settings),n=this.plugin.settings.externalEditorName.trim()||"External Editor";if(!e){new b.Notice(s.notices.setEditorPath.replace("{editor}",n));return}let i=this.plugin.app.vault.adapter;if(!(i instanceof b.FileSystemAdapter)){new b.Notice(s.notices.cannotOpenFile);return}let o=i.getBasePath(),a=(0,Xe.join)(o,(0,b.normalizePath)(t));try{let r;b.Platform.isMacOS?r=(0,ae.spawn)("open",["-a",e,a],{detached:!0,stdio:"ignore"}):b.Platform.isWin?r=(0,ae.spawn)(e,[a],{detached:!0,stdio:"ignore",shell:!1}):r=(0,ae.spawn)(e,[a],{detached:!0,stdio:"ignore",shell:!1}),r.on("error",l=>{T(`Error launching ${n}:`,l),new b.Notice(s.notices.couldNotOpenInEditor.replace("{editor}",n))}),r.unref()}catch(r){T(`Error launching ${n}:`,r),new b.Notice(s.notices.couldNotOpenInEditor.replace("{editor}",n))}}async renameImage(t){var n;let e=await this.promptForNewName(t);if(e)try{let o=`${((n=t.parent)==null?void 0:n.path)||"/"}/${e}`;await this.plugin.app.fileManager.renameFile(t,o),new b.Notice(s.notices.imageRenamed)}catch(i){T("Failed to rename file:",i),new b.Notice(s.notices.failedToRename)}}async promptForNewName(t){return new Promise(e=>{new ie(this.plugin.app,t.name,i=>{e(i)}).open()})}async deleteImageAndLink(t){let e=async()=>{try{let n=await this.plugin.linkService.removeImageLinks(t);await this.plugin.app.fileManager.trashFile(t),n?new b.Notice(s.notices.imageAndLinksDeleted):new b.Notice(s.notices.imageDeleted)}catch(n){T("Failed to delete image:",n),new b.Notice(s.notices.failedToDelete)}};this.plugin.settings.confirmBeforeDelete?new oe(this.plugin.app,t,e).open():await e()}};var se=class extends Qe.Plugin{constructor(){super(...arguments);this.hasStoredData=!1;this.settingsSaveQueue=Promise.resolve();this.settingsSaveDebounceTimer=null;this.settingsSaveDebouncedPromise=null;this.settingsSaveDebouncedResolve=null;this.settingsSaveDebouncedReject=null}async onload(){await this.loadSettings(),this.eventService=new J(this),this.menuService=new ee(this),this.imageService=new te(this),this.linkService=new ne(this),this.fileService=new re(this),this.addSettingTab(new $(this.app,this)),this.menuService.registerImageContextMenu(),this.eventService.registerEvents(),await this.checkForVersionUpdate()}onunload(){var e;this.eventService.cleanup(),this.imageService.clearDimensionCache(),this.settingsSaveDebounceTimer!==null&&(window.clearTimeout(this.settingsSaveDebounceTimer),this.settingsSaveDebounceTimer=null),this.settingsSaveDebouncedPromise&&((e=this.settingsSaveDebouncedReject)==null||e.call(this,new Error("Plugin unloaded before settings could be saved")),this.settingsSaveDebouncedPromise=null,this.settingsSaveDebouncedResolve=null,this.settingsSaveDebouncedReject=null)}async loadSettings(){let e=await this.loadData();this.hasStoredData=e!=null;let n=e&&typeof e=="object"&&!Array.isArray(e)?e:null;this.settings={...ve,...n!=null?n:{}};let i=this.settings.customResizeSizes,o=Array.isArray(i)?i.filter(a=>typeof a=="string"):typeof i=="string"?i.split(","):[];this.settings.customResizeSizes=xe(o)}async saveSettings(){await this.enqueueSettingsSave()}requestSaveSettings(e=250){return this.settingsSaveDebouncedPromise||(this.settingsSaveDebouncedPromise=new Promise((n,i)=>{this.settingsSaveDebouncedResolve=n,this.settingsSaveDebouncedReject=i})),this.settingsSaveDebounceTimer!==null&&window.clearTimeout(this.settingsSaveDebounceTimer),this.settingsSaveDebounceTimer=window.setTimeout(()=>{this.settingsSaveDebounceTimer=null,this.enqueueSettingsSave().then(()=>{var n;return(n=this.settingsSaveDebouncedResolve)==null?void 0:n.call(this)}).catch(n=>{var i;return(i=this.settingsSaveDebouncedReject)==null?void 0:i.call(this,n)}).finally(()=>{this.settingsSaveDebouncedPromise=null,this.settingsSaveDebouncedResolve=null,this.settingsSaveDebouncedReject=null})},e),this.settingsSaveDebouncedPromise}enqueueSettingsSave(){return this.settingsSaveQueue=this.settingsSaveQueue.catch(e=>{console.error("Failed to save settings (previous save):",e)}).then(()=>this.saveData(this.settings)),this.settingsSaveQueue}async checkForVersionUpdate(){let e=this.manifest.version,n=this.settings.lastShownVersion;if(!n&&!this.hasStoredData){this.settings.lastShownVersion=e,await this.saveSettings();return}if(n===e)return;let{getReleaseNotesBetweenVersions:i,getLatestReleaseNotes:o,compareVersions:a,isReleaseAutoDisplayEnabled:r}=await Promise.resolve().then(()=>(Ie(),we));if(!r(e))return;let{WhatsNewModal:l}=await Promise.resolve().then(()=>(fe(),ge)),u=n&&a(e,n)>0?i(n,e):o();new l(this.app,u,()=>{setTimeout(()=>{this.settings.lastShownVersion=e,this.saveSettings()},1e3)}).open()}};

/* nosourcemap */